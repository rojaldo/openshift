<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>OpenShift</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_openshift">OpenShift</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_introducción">Introducción</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_qué_es_openshift_diferencias_con_kubernetes_y_docker">¿Qué es OpenShift? Diferencias con Kubernetes y Docker.</h3>
<div class="sect3">
<h4 id="_qué_es_openshift">¿Qué es OpenShift?</h4>
<div class="paragraph">
<p>OpenShift es una plataforma de aplicaciones desarrollada por Red Hat que permite desplegar, gestionar y escalar aplicaciones en contenedores de forma sencilla y segura, integrando herramientas adicionales sobre Kubernetes para facilitar la administración, la seguridad y la productividad en entornos empresariales y multicloud. OpenShift gestiona todo el ciclo de vida de las aplicaciones, desde el desarrollo hasta el mantenimiento, y puede operar tanto en infraestructuras locales como en nubes públicas o privadas.</p>
</div>
</div>
<div class="sect3">
<h4 id="_diferencias_entre_openshift_y_kubernetes">Diferencias entre OpenShift y Kubernetes</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Base tecnológica:</strong> OpenShift utiliza Kubernetes como núcleo para la orquestación de contenedores, pero añade componentes propios como Red Hat Enterprise Linux CoreOS, un registro de contenedores integrado y servicios adicionales para la gestión empresarial.</p>
</li>
<li>
<p><strong>Facilidad de uso:</strong> OpenShift ofrece una experiencia más integrada y lista para usar, con una consola web avanzada y herramientas CLI (<code>oc</code>) que amplían las capacidades de <code>kubectl</code> de Kubernetes. Kubernetes, en cambio, requiere más configuración manual y conocimientos técnicos para su despliegue y operación.</p>
</li>
<li>
<p><strong>Seguridad:</strong> OpenShift incluye configuraciones de seguridad predefinidas (como SELinux) y políticas estrictas desde el inicio, mientras que en Kubernetes la seguridad debe configurarse manualmente.</p>
</li>
<li>
<p><strong>Instalación y soporte:</strong> OpenShift proporciona métodos de instalación automatizados y soporte empresarial, ideal para organizaciones que buscan una solución integral. Kubernetes es más flexible y modular, pero depende del usuario para integrar y mantener los diferentes componentes.</p>
</li>
<li>
<p><strong>Ciclo de vida de imágenes:</strong> OpenShift permite crear imágenes de contenedores automáticamente a partir del código fuente usando la funcionalidad Source-to-Image (S2I), facilitando el trabajo de los desarrolladores. En Kubernetes, las imágenes Docker deben ser generadas previamente por el usuario.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_diferencias_entre_openshift_y_docker">Diferencias entre OpenShift y Docker</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Propósito:</strong> Docker es una tecnología para crear y ejecutar contenedores de aplicaciones, enfocada en la estandarización y portabilidad del entorno de desarrollo. OpenShift, por su parte, es una plataforma completa para la orquestación y gestión de aplicaciones en contenedores a nivel empresarial, cubriendo todo el ciclo de vida de las aplicaciones.</p>
</li>
<li>
<p><strong>Alcance:</strong> Docker se utiliza principalmente para la creación y ejecución de contenedores individuales, mientras que OpenShift gestiona clústeres de contenedores y ofrece servicios adicionales como balanceo de carga, autoescalado, seguridad avanzada y gestión de usuarios.</p>
</li>
<li>
<p><strong>Integración:</strong> OpenShift puede utilizar imágenes de Docker, pero añade capas de gestión, automatización y seguridad que no están presentes en Docker por sí solo.</p>
</li>
<li>
<p><strong>Documentación y soporte:</strong> OpenShift destaca por su documentación actualizada y soporte empresarial, mientras que Docker, aunque ampliamente adoptado, puede tener menos recursos de soporte en comparación.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_tabla_resumen">Tabla Resumen</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Característica</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Docker</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Orquestación</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí (basado en Kubernetes)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No (solo contenedores individuales)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seguridad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avanzada, preconfigurada</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manual, configurable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Básica, depende del usuario</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Experiencia de usuario</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integrada, consola web y CLI propia</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modular, CLI (<code>kubectl</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLI (<code>docker</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automatización</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alta (S2I, pipelines, CI/CD)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media (requiere integración extra)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Baja (scripts personalizados)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Soporte empresarial</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí, por Red Hat</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable, según proveedor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No directamente</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>OpenShift se posiciona como una solución integral y empresarial para la gestión de aplicaciones en contenedores, facilitando la adopción de Kubernetes y superando las limitaciones de Docker en entornos productivos.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ventajas_y_casos_de_uso_de_openshift_en_entornos_empresariales">Ventajas y casos de uso de OpenShift en entornos empresariales.</h3>
<div class="sect3">
<h4 id="_ventajas_de_openshift_en_empresas">Ventajas de OpenShift en empresas</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Nube híbrida y multicloud:</strong> OpenShift permite desplegar y gestionar aplicaciones tanto en entornos de nube pública como privada, facilitando la portabilidad y evitando el bloqueo con proveedores específicos.</p>
</li>
<li>
<p><strong>Centralización y gestión simplificada:</strong> Ofrece una interfaz intuitiva y herramientas avanzadas para monitorizar y gestionar múltiples clústeres de Kubernetes desde una sola plataforma, reduciendo la complejidad operativa.</p>
</li>
<li>
<p><strong>Automatización y CI/CD:</strong> Integra flujos de trabajo de integración y entrega continua (CI/CD), lo que agiliza los ciclos de desarrollo y despliegue de aplicaciones.</p>
</li>
<li>
<p><strong>Seguridad avanzada:</strong> Incluye configuraciones de seguridad predefinidas y políticas estrictas desde el sistema operativo hasta las aplicaciones, garantizando un entorno robusto y seguro desde el inicio.</p>
</li>
<li>
<p><strong>Estandarización y portabilidad:</strong> Proporciona un marco homogéneo para desplegar aplicaciones en cualquier infraestructura, facilitando la colaboración entre equipos y la movilidad de cargas de trabajo.</p>
</li>
<li>
<p><strong>Escalabilidad y elasticidad:</strong> Permite escalar aplicaciones fácilmente según la demanda, optimizando el uso de recursos y costes, gracias a su modelo de pago por uso y gestión dinámica de contenedores.</p>
</li>
<li>
<p><strong>Modernización y soporte empresarial:</strong> Ofrece soporte profesional y recursos de Red Hat, facilitando la modernización de aplicaciones y la adopción de arquitecturas de microservicios y contenedores.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_tabla_resumen_ventajas_clave_de_openshift">Tabla resumen: Ventajas clave de OpenShift</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ventaja</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descripción</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nube híbrida y multicloud</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Portabilidad y flexibilidad para operar en cualquier infraestructura</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seguridad avanzada</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Políticas predefinidas y protección integral desde el sistema operativo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automatización y CI/CD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flujos de trabajo integrados para acelerar el desarrollo y despliegue</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Escalabilidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajuste dinámico de recursos y pago por uso optimizado</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Estandarización</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marco homogéneo para colaboración y movilidad de aplicaciones</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Soporte empresarial</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Asistencia profesional y recursos de Red Hat para la modernización de TI</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fundamentos_de_contenedores_y_paas">Fundamentos de Contenedores y PaaS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introducción_a_la_virtualización_y_contenedores">Introducción a la virtualización y contenedores</h3>
<div class="sect3">
<h4 id="_qué_es_la_virtualización">¿Qué es la virtualización?</h4>
<div class="paragraph">
<p>La virtualización es una tecnología que permite crear versiones virtuales de recursos informáticos, como servidores, sistemas operativos, almacenamiento o redes, sobre una infraestructura física existente. Esto se logra mediante una capa de software llamada hipervisor, que simula el hardware y permite ejecutar múltiples máquinas virtuales (VM), cada una con su propio sistema operativo y aplicaciones, de forma aislada y segura en un mismo servidor físico.</p>
</div>
<div class="paragraph">
<p>Principales características de la virtualización:
- Permite ejecutar varios sistemas operativos diferentes en un solo servidor físico.
- Cada máquina virtual es completamente independiente y está aislada de las demás.
- Facilita la consolidación de servidores, el ahorro de costes y la gestión eficiente de recursos.</p>
</div>
</div>
<div class="sect3">
<h4 id="_qué_son_los_contenedores">¿Qué son los contenedores?</h4>
<div class="paragraph">
<p>Los contenedores son una forma de virtualización a nivel de sistema operativo que permite empaquetar aplicaciones junto con todas sus dependencias en unidades ligeras y portátiles. A diferencia de las máquinas virtuales, los contenedores comparten el núcleo del sistema operativo anfitrión, lo que los hace mucho más eficientes en el uso de recursos y con tiempos de arranque mucho menores.</p>
</div>
<div class="paragraph">
<p>Ventajas clave de los contenedores:
- Portabilidad: Se pueden ejecutar en cualquier entorno compatible, desde servidores locales hasta la nube, sin modificar el código.
- Eficiencia: Usan menos recursos que las VM, ya que no requieren un sistema operativo completo por instancia.
- Escalabilidad: Permiten escalar aplicaciones de forma rápida y sencilla, ideal para arquitecturas de microservicios y DevOps.
- Aislamiento: Cada contenedor está aislado, lo que evita conflictos entre aplicaciones y facilita la seguridad.</p>
</div>
</div>
<div class="sect3">
<h4 id="_diferencias_entre_virtualización_y_contenedores">Diferencias entre virtualización y contenedores</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Característica</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Máquinas Virtuales (VM)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contenedores</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nivel de virtualización</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virtualizan hardware completo (hipervisor)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virtualizan a nivel de sistema operativo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sistema operativo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cada VM tiene su propio SO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comparten el SO anfitrión</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Consumo de recursos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alto (requieren SO completo por VM)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bajo (solo la app y dependencias)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tiempo de arranque</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lento (minutos)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rápido (segundos)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Portabilidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Limitada, depende del SO de la VM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Muy alta, ejecutables en cualquier entorno</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aislamiento</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Completo, mayor seguridad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parcial, depende del aislamiento del SO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Escenarios ideales</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Diversidad de SO, aplicaciones monolíticas</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Microservicios, DevOps, CI/CD, aplicaciones ágiles</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_resumen">Resumen</h4>
<div class="paragraph">
<p>La virtualización tradicional, mediante máquinas virtuales, es ideal para ejecutar diferentes sistemas operativos y aplicaciones monolíticas con alto aislamiento y seguridad. Los contenedores, en cambio, son óptimos para entornos modernos donde se requiere portabilidad, eficiencia, escalabilidad y despliegue rápido de aplicaciones, especialmente en arquitecturas de microservicios y DevOps.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_conceptos_básicos_de_docker_y_ciclo_de_vida_de_aplicaciones_en_contenedores">Conceptos básicos de Docker y ciclo de vida de aplicaciones en contenedores</h3>
<div class="sect3">
<h4 id="_conceptos_básicos_de_docker">Conceptos básicos de Docker</h4>
<div class="paragraph">
<p>Docker es una plataforma de software que permite crear, probar y desplegar aplicaciones rápidamente mediante el uso de contenedores, que son unidades ligeras y portátiles que incluyen todo lo necesario para ejecutar una aplicación: código, bibliotecas, herramientas del sistema y dependencias. Los contenedores se ejecutan de forma aislada sobre el sistema operativo anfitrión, lo que garantiza portabilidad y consistencia entre entornos de desarrollo, pruebas y producción.</p>
</div>
<div class="ulist">
<div class="title">Principales conceptos de Docke:</div>
<ul>
<li>
<p><strong>Imagen (Image):</strong> Plantilla de solo lectura que contiene el sistema operativo, las dependencias y el código necesario para ejecutar una aplicación. Las imágenes pueden almacenarse y compartirse mediante registros como Docker Hub.</p>
</li>
<li>
<p><strong>Contenedor (Container):</strong> Instancia en ejecución de una imagen. Los contenedores son efímeros y ligeros, y pueden ejecutarse, detenerse, reiniciarse o eliminarse fácilmente.</p>
</li>
<li>
<p><strong>Registro (Registry):</strong> Repositorio donde se almacenan y distribuyen imágenes de Docker, permitiendo compartirlas entre equipos y automatizar despliegues.</p>
</li>
<li>
<p><strong>Volumen (Volume):</strong> Mecanismo para persistir datos fuera del ciclo de vida del contenedor, evitando la pérdida de información al eliminar o reiniciar contenedores.</p>
</li>
<li>
<p><strong>Red (Network):</strong> Sistema que permite la comunicación entre contenedores y con el exterior, facilitando la construcción de aplicaciones distribuidas.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ciclo_de_vida_de_aplicaciones_en_contenedores">Ciclo de vida de aplicaciones en contenedores</h4>
<div class="paragraph">
<p>El ciclo de vida de una aplicación en Docker abarca desde el desarrollo hasta la eliminación del contenedor, siguiendo estos pasos principales:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Desarrollo de la aplicación:</strong> Se crea y prueba el código fuente de la aplicación en el entorno local.</p>
</li>
<li>
<p><strong>Creación de la imagen Docker:</strong> Se genera una imagen que contiene la aplicación y todas sus dependencias, normalmente usando un archivo Dockerfile.</p>
</li>
<li>
<p><strong>Pruebas en entorno de desarrollo o prueba:</strong> La imagen se ejecuta en contenedores para validar su funcionamiento antes de pasar a producción.</p>
</li>
<li>
<p><strong>Distribución de la imagen:</strong> La imagen se almacena en un registro (público o privado) para su distribución y despliegue.</p>
</li>
<li>
<p><strong>Despliegue en producción:</strong> Se ejecutan contenedores a partir de la imagen en los entornos de producción, aprovechando la portabilidad y escalabilidad de Docker.</p>
</li>
<li>
<p><strong>Actualización o modificación:</strong> Si la aplicación requiere cambios, se actualiza el código, se genera una nueva imagen y se repite el ciclo.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A nivel técnico, el ciclo de vida de un contenedor Docker consta de las siguientes etapas:
- <strong>Created:</strong> El contenedor se crea a partir de una imagen, pero aún no está en ejecución.
- <strong>Running:</strong> El contenedor está</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_persistencia_de_datos_en_contenedores">Persistencia de datos en contenedores</h3>
<div class="paragraph">
<p>La persistencia de datos en contenedores es fundamental para aplicaciones que requieren conservar información más allá del ciclo de vida del contenedor, como bases de datos o sistemas de gestión de archivos. Por defecto, los datos generados dentro de un contenedor Docker son efímeros y se pierden al eliminar o reiniciar el contenedor. Para evitar esta pérdida, Docker ofrece mecanismos de almacenamiento persistente: volúmenes, bind mounts y tmpfs.</p>
</div>
<div class="sect3">
<h4 id="_opciones_principales_para_la_persistencia_de_datos">Opciones principales para la persistencia de datos</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Volúmenes (Volumes):</strong> Son unidades de almacenamiento gestionadas por Docker, independientes del ciclo de vida del contenedor. Permiten almacenar datos de forma persistente y compartirlos entre varios contenedores. Los volúmenes son la opción recomendada por Docker para la gestión de datos persistentes.</p>
</li>
<li>
<p><strong>Bind mounts:</strong> Permiten montar directorios o archivos del sistema host directamente en el contenedor. Son útiles para desarrollo y pruebas, pero menos portables y gestionados que los volúmenes.</p>
</li>
<li>
<p><strong>Tmpfs mounts:</strong> Almacenan datos en la memoria RAM del host y se usan para información temporal que no requiere persistencia tras el reinicio del contenedor.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ventajas_de_usar_almacenamiento_persistente">Ventajas de usar almacenamiento persistente</h4>
<div class="ulist">
<ul>
<li>
<p>Los datos sobreviven a la eliminación o actualización de los contenedores.</p>
</li>
<li>
<p>Permite compartir información entre varios contenedores.</p>
</li>
<li>
<p>Facilita la realización de copias de seguridad y la migración de datos.</p>
</li>
<li>
<p>Desacopla la aplicación de los datos, haciendo los contenedores más livianos y portables.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ejemplo_de_uso_de_volúmenes_en_docker">Ejemplo de uso de volúmenes en Docker</h4>
<div class="listingblock">
<div class="title">Creación de un volumen:</div>
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">docker volume create my_volume</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Montaje del volumen en un contenedor:</div>
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">docker run -d -v mi_volumen:/ruta/en/contenedor nombre_imagen</code></pre>
</div>
</div>
<div class="paragraph">
<p>En este ejemplo, todo lo que se escriba en <code>/ruta/en/contenedor</code> se almacenará en el volumen y persistirá aunque el contenedor se elimine.</p>
</div>
<div class="listingblock">
<div class="title">Compartición de volúmenes entre contenedores:</div>
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">docker run -d -v mi_volumen:/datos contenedor1
docker run -d -v mi_volumen:/datos contenedor2</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_orquestación_de_contenedores_con_kubernetes">Orquestación de Contenedores con Kubernetes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_principios_de_kubernetes_pods_servicios_despliegues_y_namespaces">Principios de Kubernetes: pods, servicios, despliegues y namespaces</h3>
<div class="sect3">
<h4 id="_pods">Pods</h4>
<div class="paragraph">
<p>Un pod es la unidad mínima de despliegue en Kubernetes. Representa una instancia única de una aplicación y puede contener uno o varios contenedores que comparten recursos de red y almacenamiento. Los pods son efímeros y se recrean automáticamente si fallan.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Pod
metadata:
  name: nginx-pod
spec:
  containers:
  - name: nginx-container
    image: nginx:latest</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_servicios">Servicios</h4>
<div class="paragraph">
<p>Los servicios proporcionan un punto de acceso estable a un conjunto de pods. Permiten el descubrimiento y balanceo de carga entre pods, manteniendo la conectividad aunque los pods se reinicien o escalen.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Service
metadata:
  name: nginx-service
spec:
  selector:
    app: nginx
  ports:
    - protocol: TCP
      port: 80
      targetPort: 9376</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_despliegues_deployments">Despliegues (Deployments)</h4>
<div class="paragraph">
<p>Los despliegues gestionan el ciclo de vida de las aplicaciones mediante declaraciones del estado deseado. Permiten actualizaciones continuas (rolling updates), reversiones y escalado automático.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.16</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_namespaces">Namespaces</h4>
<div class="paragraph">
<p>Los namespaces segmentan recursos en clústeres virtuales independientes. Permiten aislar entornos (dev/prod), gestionar cuotas de recursos y controlar accesos mediante RBAC.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Crear namespace
kubectl create namespace desarrollo

# Contexto para namespace específico
kubectl config set-context --current --namespace=desarrollo</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_actualizaciones_continuas_rollback_y_enrutamiento_en_kubernetes">Actualizaciones continuas, rollback y enrutamiento en Kubernetes</h3>
<div class="sect3">
<h4 id="_rollback">Rollback</h4>
<div class="paragraph">
<p><strong>Comandos prácticos para revertir versiones:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Ver historial de revisiones
kubectl rollout history deployment/mi-app

# Revertir a revisión anterior
kubectl rollout undo deployment/mi-app

# Revertir a revisión específica
kubectl rollout undo deployment/mi-app --to-revision=3

# Simular reversión (dry-run)
kubectl rollout undo deployment/mi-app --dry-run=server</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_actualizaciones_continuas_rolling_updates">Actualizaciones continuas (Rolling Updates)</h4>
<div class="paragraph">
<p><strong>Comandos para iniciar y monitorizar una actualización:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Iniciar actualización
kubectl set image deployment/mi-app contenedor=imagen:v2

# Monitorear progreso
kubectl rollout status deployment/mi-app</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_integración_de_capacidades">Integración de capacidades</h4>
<div class="paragraph">
<p><strong>Flujo completo actualización + rollback:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Desplegar nueva versión
kubectl apply -f deployment-v2.yaml

# Verificar estado
kubectl rollout status deployment/mi-app

# Detectar error y revertir
kubectl rollout undo deployment/mi-app

# Verificar reversión
kubectl get pods -l app=mi-app --show-labels</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introducción_a_openshift">Introducción a OpenShift</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_componentes_y_arquitectura_de_openshift">Componentes y arquitectura de OpenShift</h3>
<div class="sect3">
<h4 id="_visión_general_de_la_arquitectura">Visión general de la arquitectura</h4>
<div class="paragraph">
<p>OpenShift es una plataforma de contenedores basada en Kubernetes que añade capas adicionales de gestión, seguridad y automatización para facilitar el despliegue y operación de aplicaciones en entornos empresariales. Su arquitectura está compuesta por varios niveles y componentes clave que trabajan juntos para ofrecer una solución integral.</p>
</div>
</div>
<div class="sect3">
<h4 id="_niveles_principales_de_la_arquitectura">Niveles principales de la arquitectura</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Infraestructura:</strong> OpenShift puede desplegarse sobre servidores físicos, virtuales o en la nube (privada o pública).</p>
</li>
<li>
<p><strong>Plano de control (Control Plane):</strong> Gestiona el estado global del clúster y toma decisiones sobre la programación, escalado y supervisión de recursos.</p>
</li>
<li>
<p><strong>Nodos de trabajo (Worker Nodes):</strong> Ejecutan los contenedores y aplicaciones del usuario, gestionados y supervisados por el plano de control.</p>
</li>
<li>
<p><strong>Capa de servicios y red:</strong> Incluye servicios internos, balanceo de carga, almacenamiento persistente y componentes de red para la comunicación entre aplicaciones.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_componentes_principales_de_openshift">Componentes principales de OpenShift</h4>
<div class="sect4">
<h5 id="_plano_de_control_nodo_maestro">Plano de control (nodo maestro)</h5>
<div class="ulist">
<ul>
<li>
<p><strong>OpenShift API Server:</strong> Gestiona las solicitudes y la configuración de recursos del clúster a través de una API RESTful.</p>
</li>
<li>
<p><strong>Controller Manager:</strong> Supervisa el estado del clúster y asegura que los recursos coincidan con el estado deseado.</p>
</li>
<li>
<p><strong>Scheduler:</strong> Decide en qué nodo se ejecutarán los pods, optimizando el uso de recursos.</p>
</li>
<li>
<p><strong>etcd:</strong> Base de datos distribuida que almacena toda la configuración y estado del clúster de manera consistente.</p>
</li>
<li>
<p><strong>Operator Framework:</strong> Automatiza la gestión y actualización de componentes y aplicaciones dentro del clúster.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_nodos_de_trabajo_worker_nodes">Nodos de trabajo (worker nodes)</h5>
<div class="ulist">
<ul>
<li>
<p><strong>CRI-O:</strong> Motor de ejecución de contenedores optimizado para Kubernetes y OpenShift.</p>
</li>
<li>
<p><strong>Kubelet:</strong> Agente que ejecuta y supervisa los contenedores en el nodo.</p>
</li>
<li>
<p><strong>OpenShift SDN/Red interna:</strong> Gestiona la conectividad y el aislamiento de red entre pods y servicios.</p>
</li>
<li>
<p><strong>OpenShift Router (Ingress Controller):</strong> Expone aplicaciones al exterior y gestiona el enrutamiento del tráfico hacia los servicios internos.</p>
</li>
<li>
<p><strong>Registro de imágenes interno (Image Registry):</strong> Almacena y gestiona imágenes de contenedores de forma local y segura.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_componentes_adicionales_y_servicios_integrados">Componentes adicionales y servicios integrados</h5>
<div class="ulist">
<ul>
<li>
<p><strong>OperatorHub:</strong> Catálogo de operadores para instalar y gestionar aplicaciones y servicios de forma automatizada.</p>
</li>
<li>
<p><strong>OpenShift Pipelines (CI/CD):</strong> Herramienta integrada para crear y gestionar flujos de integración y entrega continua.</p>
</li>
<li>
<p><strong>OpenShift Service Mesh:</strong> Facilita la gestión, monitorización y seguridad del tráfico entre microservicios.</p>
</li>
<li>
<p><strong>OpenShift Serverless:</strong> Permite ejecutar cargas de trabajo bajo demanda sin gestionar servidores.</p>
</li>
<li>
<p><strong>Consola web y CLI (<code>oc</code>):</strong> Interfaz gráfica y de línea de comandos para la gestión y supervisión del clúster.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tabla_resumen_componentes_clave_de_openshift">Tabla resumen: Componentes clave de OpenShift</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Componente</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Función principal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift API Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interfaz de gestión y configuración del clúster</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controller Manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mantiene el estado deseado de los recursos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scheduler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Asigna pods a nodos óptimos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etcd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Almacén de datos distribuido del clúster</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kubelet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ejecuta y supervisa contenedores en nodos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CRI-O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Motor de ejecución de contenedores</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift Router/Ingress</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enrutamiento y balanceo de tráfico externo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image Registry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Almacenamiento interno de imágenes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OperatorHub</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Catálogo de operadores y automatización</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service Mesh, Pipelines</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gestión de microservicios y CI/CD</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_resumen_2">Resumen</h4>
<div class="paragraph">
<p>La arquitectura de OpenShift está diseñada para ofrecer alta disponibilidad, escalabilidad y seguridad, integrando componentes propios y de Kubernetes, junto a servicios empresariales como CI/CD, gestión de imágenes y automatización avanzada. Esta estructura permite a las organizaciones desplegar y gestionar aplicaciones modernas de forma eficiente y segura en cualquier entorno.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_diferencias_entre_openshift_y_kubernetes_2">Diferencias entre OpenShift y Kubernetes</h3>
<div class="sect3">
<h4 id="_visión_general">Visión general</h4>
<div class="paragraph">
<p>OpenShift y Kubernetes son plataformas para la orquestación y gestión de contenedores, pero difieren en su enfoque, facilidad de uso, seguridad y servicios integrados. OpenShift es una distribución empresarial de Kubernetes desarrollada por Red Hat, que añade herramientas, seguridad y soporte para simplificar la experiencia de despliegue y operación en entornos empresariales.</p>
</div>
</div>
<div class="sect3">
<h4 id="_diferencias_clave">Diferencias clave</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Enfoque y experiencia de usuario:</strong></p>
</li>
<li>
<p>Kubernetes es un sistema open source modular, flexible y altamente configurable, pero requiere que el usuario monte, configure y mantenga todos los componentes manualmente.</p>
</li>
<li>
<p>OpenShift ofrece una plataforma lista para usar, con muchas funciones preconfiguradas, interfaz web avanzada y herramientas CLI propias, lo que reduce la curva de aprendizaje y la complejidad de la gestión.</p>
</li>
<li>
<p><strong>Seguridad:</strong></p>
</li>
<li>
<p>OpenShift incluye políticas de seguridad avanzadas y predefinidas, como restricciones de contexto de seguridad (SCC), RBAC integrado y escaneo de imágenes, facilitando el cumplimiento de normativas y la protección desde el inicio.</p>
</li>
<li>
<p>Kubernetes también ofrece herramientas de seguridad robustas, pero estas deben configurarse y mantenerse manualmente, lo que puede aumentar la complejidad y el riesgo de errores.</p>
</li>
<li>
<p><strong>Automatización y CI/CD:</strong></p>
</li>
<li>
<p>OpenShift integra de serie pipelines CI/CD, soporte GitOps y herramientas de automatización, permitiendo flujos de trabajo DevOps más ágiles y productivos.</p>
</li>
<li>
<p>Kubernetes requiere la integración manual de herramientas externas para lograr automatización y CI/CD.</p>
</li>
<li>
<p><strong>Soporte y mantenimiento:</strong></p>
</li>
<li>
<p>OpenShift incluye soporte empresarial, actualizaciones automáticas y mantenimiento gestionado por Red Hat, lo que reduce la carga operativa y el riesgo de errores críticos.</p>
</li>
<li>
<p>Kubernetes depende del usuario o de proveedores externos para el soporte y las actualizaciones, lo que puede requerir equipos técnicos más especializados.</p>
</li>
<li>
<p><strong>Interfaz y usabilidad:</strong></p>
</li>
<li>
<p>OpenShift proporciona una consola web intuitiva y potente, adecuada tanto para desarrolladores como para administradores, facilitando la gestión visual de recursos, despliegues y monitorización.</p>
</li>
<li>
<p>Kubernetes se gestiona principalmente mediante la CLI (<code>kubectl</code>) y archivos de configuración, con un panel web básico que suele estar deshabilitado por motivos de seguridad.</p>
</li>
<li>
<p><strong>Costos:</strong></p>
</li>
<li>
<p>Kubernetes es gratuito y open source, pero los costes de infraestructura, soporte y personalización recaen en el usuario.</p>
</li>
<li>
<p>OpenShift es una solución comercial con coste de suscripción, que incluye soporte, mantenimiento y características empresariales avanzadas.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_tabla_comparativa">Tabla comparativa</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Característica</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seguridad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avanzada, preconfigurada</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manual, configurable</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Experiencia de usuario</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Consola web y CLI propia</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLI (<code>kubectl</code>), panel básico</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automatización</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integrada (CI/CD, GitOps)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Externa, requiere integración</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Soporte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empresarial, gestionado por Red Hat</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autogestionado o por terceros</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Coste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comercial (licencia)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gratuito (open source)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flexibilidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Menor, más opinada y cerrada</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Máxima, modular y personalizable</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_resumen_3">Resumen</h4>
<div class="paragraph">
<p>OpenShift es ideal para empresas que buscan una plataforma integral, segura y fácil de gestionar, con soporte profesional y menor complejidad operativa. Kubernetes es la opción preferida para equipos técnicos avanzados que desean máxima flexibilidad y control sobre la infraestructura, aunque a costa de una mayor complejidad y responsabilidad en la configuración y el mantenimiento.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_versiones_y_modalidades_de_openshift_online_enterprise_minishift">Versiones y modalidades de OpenShift (Online, Enterprise, Minishift)</h3>
<div class="sect3">
<h4 id="_versiones_de_openshift">Versiones de OpenShift</h4>
<div class="paragraph">
<p>OpenShift sigue un esquema de versionado semántico compuesto por versión principal, secundaria y de revisión, con actualizaciones frecuentes para mejorar funcionalidades, seguridad y soporte. Las versiones recientes incluyen la 4.17 (junio de 2025), 4.16 (junio de 2024) y 4.15 (febrero de 2024), con soporte y actualizaciones programadas según el ciclo de vida publicado por Red Hat.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Versión</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lanzamiento</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fin de soporte estimado</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Octubre 2024</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14 de febrero de 2026</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Junio 2024</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 de noviembre de 2025</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Febrero 2024</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">27 de junio de 2025</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_modalidades_de_openshift">Modalidades de OpenShift</h4>
<div class="paragraph">
<p>OpenShift se ofrece en varias modalidades adaptadas a diferentes necesidades empresariales y de desarrollo:</p>
</div>
<div class="sect4">
<h5 id="_openshift_container_platform_enterprise">OpenShift Container Platform (Enterprise)</h5>
<div class="ulist">
<ul>
<li>
<p>Instalación autogestionada en infraestructuras propias, nubes públicas o privadas.</p>
</li>
<li>
<p>Incluye todas las capacidades empresariales: alta disponibilidad, escalabilidad, seguridad avanzada, integración CI/CD, soporte multicloud y herramientas de automatización[11].</p>
</li>
<li>
<p>Soporte profesional de Red Hat y actualizaciones automáticas[11].</p>
</li>
<li>
<p>Permite la gestión de cargas de trabajo de contenedores y, en versiones recientes, también de máquinas virtuales (OpenShift Virtualization Engine)[12].</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_openshift_online">OpenShift Online</h5>
<div class="ulist">
<ul>
<li>
<p>Modalidad completamente gestionada por Red Hat, accesible como servicio en la nube.</p>
</li>
<li>
<p>Ideal para desarrolladores y equipos que desean evitar la gestión de infraestructura.</p>
</li>
<li>
<p>Proporciona acceso rápido a entornos de desarrollo y despliegue de aplicaciones, escalado automático y facturación por uso.</p>
</li>
<li>
<p>Permite experimentar con las últimas versiones de OpenShift sin necesidad de instalaciones complejas.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_openshift_dedicated">OpenShift Dedicated</h5>
<div class="ulist">
<ul>
<li>
<p>Servicio gestionado de OpenShift alojado en la nube (AWS, Google Cloud, Azure), pero dedicado a una sola organización.</p>
</li>
<li>
<p>Incluye soporte empresarial, seguridad avanzada y gestión completa por parte de Red Hat.</p>
</li>
<li>
<p>Apto para empresas que requieren un entorno aislado y gestionado con garantías de SLA.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_crc_codeready_containers">CRC (CodeReady Containers)</h5>
<div class="ulist">
<ul>
<li>
<p>Versión ligera de OpenShift para desarrolladores, que permite ejecutar un clúster de OpenShift de un solo nodo en una máquina local.</p>
</li>
<li>
<p>Ideal para pruebas, desarrollo y formación, con recursos limitados (1 nodo, 10 GB RAM).</p>
</li>
<li>
<p>Permite experimentar con OpenShift sin necesidad de infraestructura compleja, pero no es adecuado para producción.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tabla_comparativa_de_modalidades">Tabla comparativa de modalidades</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modalidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gestión</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uso principal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Escalabilidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Soporte empresarial</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entorno recomendado</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Container Platform (Enterprise)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autogestionada</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Producción empresarial</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empresas, nube híbrida</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Online</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gestionada</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desarrollo y pruebas</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Limitado</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desarrolladores, SaaS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dedicated</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gestionada</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Producción empresarial</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sí</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empresas, nube pública</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CRC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desarrollo y formación</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Limitada (1 nodo)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formación, prototipos</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_resumen_4">Resumen</h4>
<div class="paragraph">
<p>OpenShift ofrece versiones y modalidades adaptadas tanto a empresas como a desarrolladores individuales, abarcando desde soluciones autogestionadas y de misión crítica hasta entornos de desarrollo local y servicios completamente gestionados en la nube. La elección depende del nivel de control, soporte y escalabilidad requerido por cada organización o proyecto.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_instalación_local_de_crc_codeready_containers_para_openshift">Instalación local de CRC (CodeReady Containers) para OpenShift</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_requisitos_del_sistema">Requisitos del sistema</h3>
<div class="paragraph">
<p><strong>Mínimos obligatorios</strong>:
- 4 núcleos de CPU
- 9 GB de RAM (16 GB recomendados)
- 35 GB de espacio en disco
- Soporte de virtualización (KVM/libvirt)
- Linux/macOS/Windows 10+</p>
</div>
</div>
<div class="sect2">
<h3 id="_pasos_de_instalación">Pasos de instalación</h3>
<div class="paragraph">
<p><strong>1. Descarga y preparación</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Descargar CRC desde portal Red Hat (requiere cuenta)
wget https://mirror.openshift.com/pub/openshift-v4/clients/crc/latest/crc-linux-amd64.tar.xz

# Extraer archivos
tar -xvf crc-linux-amd64.tar.xz

# Mover binario a PATH
sudo mv crc-linux-*/crc /usr/local/bin/
chmod +x /usr/local/bin/crc</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>2. Configuración inicial</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Preparar entorno (configura KVM/libvirt)
crc setup

# Ajustar recursos (ejemplo: 16GB RAM)
crc config set memory 16384</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>3. Iniciar cluster</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Iniciar con pull-secret (descargado de console.redhat.com)
crc start -p ~/pull-secret.txt</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Nota</strong>: El proceso tarda ~10 minutos</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_verificación_y_acceso">Verificación y acceso</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Comprobar estado
crc status

# Acceso como administrador
oc login -u kubeadmin -p &lt;contraseña-generada&gt; https://api.crc.testing:6443

# Acceso como desarrollador
oc login -u developer -p developer https://api.crc.testing:6443

# Abrir consola web
crc console</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuración_avanzada">Configuración avanzada</h3>
<div class="paragraph">
<p><strong>Operadores base recomendados</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Instalar operadores desde OperatorHub
oc apply -f https://operatorhub.io/install/prometheus.yaml
oc apply -f https://operatorhub.io/install/strimzi-kafka-operator.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Ajustes clave</strong>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parámetro</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comando</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Valor típico</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPUs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>crc config set cpus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4-8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disco</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>crc config set disk-size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>crc config set network-mode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">vsock</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_solución_de_problemas_comunes">Solución de problemas comunes</h3>
<div class="paragraph">
<p><strong>Error de virtualización</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo modprobe kvm
sudo usermod -aG libvirt $USER
newgrp libvirt</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Reinicio completo</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">crc stop
crc delete
crc cleanup
crc start</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_recursos_adicionales">Recursos adicionales</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Documentación oficial CRC [<a href="https://crc.dev/docs/" class="bare">https://crc.dev/docs/</a>]</p>
</li>
<li>
<p>Guía de operadores [<a href="https://es.linkedin.com/pulse/gu%C3%ADa-para-configurar-openshift-crc-y-operadores-base-meza-kranc" class="bare">https://es.linkedin.com/pulse/gu%C3%ADa-para-configurar-openshift-crc-y-operadores-base-meza-kranc</a>]</p>
</li>
<li>
<p>Troubleshooting avanzado [<a href="https://dev.to/khurammurad/how-to-set-up-openshift-local-crc-on-ubuntu-a-developers-guide-le2" class="bare">https://dev.to/khurammurad/how-to-set-up-openshift-local-crc-on-ubuntu-a-developers-guide-le2</a>]</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_acceso_y_gestión_desde_la_consola_web_y_la_línea_de_comandos_oc">Acceso y gestión desde la consola web y la línea de comandos (oc)</h3>
<div class="sect3">
<h4 id="_acceso_y_gestión_desde_la_consola_web">Acceso y gestión desde la consola web</h4>
<div class="paragraph">
<p>La consola web de OpenShift es una interfaz gráfica accesible desde cualquier navegador web. Permite a desarrolladores y administradores visualizar, gestionar y supervisar los recursos y proyectos del clúster. La consola web se ejecuta como pods en los nodos de control y está gestionada por el operador de consola (<code>console-operator</code>).</p>
</div>
<div class="ulist">
<div class="title">Existen dos perspectivas principales:</div>
<ul>
<li>
<p><strong>Administrator</strong>: Permite gestionar el clúster, recursos, usuarios, operadores, almacenamiento, redes, monitoreo, actualizaciones y más.</p>
</li>
<li>
<p><strong>Developer</strong>: Orientada al desarrollo y despliegue de aplicaciones, con herramientas para la gestión de proyectos, componentes y recursos asociados.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>El acceso se realiza mediante la URL proporcionada tras la instalación del clúster o consultando con el comando <code>oc whoami --show-console</code>. El inicio de sesión se realiza con credenciales de usuario, como <code>kubeadmin</code> para acceso total o usuarios con permisos limitados. Dependiendo del rol, se mostrarán diferentes opciones y permisos en la interfaz. Desde la consola web se pueden crear, editar y eliminar proyectos, gestionar recursos, revisar el estado del clúster y acceder a tutoriales guiados (quick starts) para facilitar la adopción de la plataforma.</p>
</div>
</div>
<div class="sect3">
<h4 id="_acceso_y_gestión_desde_la_línea_de_comandos_oc">Acceso y gestión desde la línea de comandos (oc)</h4>
<div class="paragraph">
<p>La herramienta de línea de comandos <code>oc</code> permite gestionar todos los recursos de OpenShift desde un terminal. Es posible instalarla descargando el binario desde la página oficial o desde la propia consola web. Una vez instalada, el acceso al clúster se realiza con el comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>oc login https://api.&lt;cluster&gt;.openshift.com --token=&lt;token&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>El token de acceso puede obtenerse desde la consola web, opción "Copy Login Command", o bien autenticarse con usuario y contraseña:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>oc login -u &lt;usuario&gt; -p &lt;contraseña&gt; https://api.&lt;cluster&gt;.openshift.com</pre>
</div>
</div>
<div class="paragraph">
<p>Al iniciar sesión, se crea o actualiza el archivo de configuración en <code>~/.kube/config</code> con los datos de acceso. Desde la CLI se pueden realizar todas las operaciones administrativas y de desarrollo, como crear proyectos (<code>oc new-project</code>), desplegar aplicaciones, consultar el estado del clúster (<code>oc status</code>), obtener información de recursos (<code>oc get</code>, <code>oc describe</code>), gestionar permisos y mucho más. Además, la CLI soporta autocompletado en Bash y Zsh para facilitar el uso de los comandos.</p>
</div>
</div>
<div class="sect3">
<h4 id="_resumen_5">Resumen</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Consola web</strong>: Interfaz gráfica, acceso según rol (admin/desarrollador), gestión visual de recursos, proyectos y clúster.</p>
</li>
<li>
<p><strong>CLI (oc)</strong>: Gestión completa desde terminal, autenticación por token o usuario/contraseña, operaciones avanzadas y automatización de tareas.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ambas opciones son complementarias y permiten una administración flexible y eficiente de OpenShift.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_recursos_y_operaciones_en_openshift">Recursos y Operaciones en OpenShift</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OpenShift es una plataforma de gestión y orquestación de contenedores basada en Kubernetes, diseñada para facilitar el ciclo de vida completo de las aplicaciones, desde el desarrollo hasta la operación y el monitoreo.</p>
</div>
<div class="sect2">
<h3 id="_recursos_principales_en_openshift">Recursos principales en OpenShift</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Pods:</strong> Unidades mínimas de ejecución que agrupan uno o varios contenedores con recursos compartidos como red y almacenamiento persistente.</p>
</li>
<li>
<p><strong>Servicios:</strong> Proveen acceso estable y consistente a un conjunto de pods, gestionando el balanceo de carga interno y la exposición de aplicaciones.</p>
</li>
<li>
<p><strong>Controladores de replicación y ReplicaSets:</strong> Permiten el escalado horizontal y la alta disponibilidad de las aplicaciones, asegurando el número deseado de réplicas de pods.</p>
</li>
<li>
<p><strong>Deployments y DeploymentConfigs:</strong> Gestionan actualizaciones y el ciclo de vida de los pods de manera declarativa.</p>
</li>
<li>
<p><strong>PersistentVolume (PV) y PersistentVolumeClaim (PVC):</strong> Abstracción de almacenamiento persistente en red, permitiendo que los datos sobrevivan a reinicios y actualizaciones de pods.</p>
</li>
<li>
<p><strong>Projects:</strong> Agrupaciones lógicas de recursos (similar a los namespaces de Kubernetes) que aíslan y organizan los recursos y el acceso de los usuarios.</p>
</li>
<li>
<p><strong>Routes:</strong> Exponen servicios internos al exterior, permitiendo el acceso a aplicaciones desde Internet mediante nombres de dominio y balanceo de carga.</p>
</li>
<li>
<p><strong>MachineSets:</strong> Agrupan nodos de trabajo para facilitar el autoscaling y la gestión de recursos de cómputo.</p>
</li>
<li>
<p><strong>Operators:</strong> Extienden la funcionalidad de Kubernetes/OpenShift, automatizando la gestión de aplicaciones y servicios complejos mediante APIs y CLI.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_operaciones_clave_en_openshift">Operaciones clave en OpenShift</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Orquestación y gestión de ciclo de vida:</strong> Automatiza la creación, despliegue, escalado y actualización de aplicaciones y servicios.</p>
</li>
<li>
<p><strong>Gestión de recursos:</strong></p>
</li>
<li>
<p><strong>ResourceQuotas:</strong> Limita el uso de recursos (CPU, memoria, número de pods, almacenamiento) a nivel de proyecto para evitar el consumo excesivo y garantizar la equidad entre equipos.</p>
</li>
<li>
<p><strong>LimitRanges:</strong> Define límites mínimos y máximos de recursos por pod o contenedor dentro de un proyecto.</p>
</li>
<li>
<p><strong>PriorityClasses:</strong> Asigna prioridades a los pods para influir en la programación y la preempción en caso de competencia por recursos.</p>
</li>
<li>
<p><strong>Escalado automático:</strong> Ajuste dinámico de la cantidad de pods según la carga de trabajo, usando controladores de replicación y escaladores automáticos.</p>
</li>
<li>
<p><strong>Seguridad y control de acceso:</strong> Políticas de acceso, aislamiento de red, gestión de roles y autenticación para proteger los recursos y las aplicaciones.</p>
</li>
<li>
<p><strong>Supervisión y observabilidad:</strong> Herramientas integradas para monitoreo en tiempo real, análisis de logs y métricas de rendimiento (OpenShift Observability).</p>
</li>
<li>
<p><strong>Operaciones automatizadas:</strong> Instalación, actualizaciones y gestión del clúster y aplicaciones mediante operadores y flujos automatizados.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_capacidades_adicionales">Capacidades adicionales</h3>
<div class="ulist">
<ul>
<li>
<p><strong>CI/CD integrado:</strong> OpenShift incluye herramientas como OpenShift Pipelines y OpenShift GitOps para automatizar la integración y entrega continua de aplicaciones.</p>
</li>
<li>
<p><strong>Autoservicio para desarrolladores:</strong> Los equipos pueden crear y gestionar sus propios entornos y pipelines sin intervención directa del equipo de operaciones, acelerando el desarrollo y el despliegue.</p>
</li>
<li>
<p><strong>Gestión centralizada:</strong> Consola de administración unificada para controlar clústeres, servicios, costos y suscripciones.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_resumen_6">Resumen</h3>
<div class="paragraph">
<p>OpenShift proporciona un entorno robusto para el desarrollo, despliegue y operación de aplicaciones en contenedores, combinando recursos avanzados de Kubernetes con herramientas propias para gestión, seguridad, automatización y observabilidad, facilitando tanto las tareas de los desarrolladores como las de los equipos de operaciones.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_despliegue_de_aplicaciones_en_openshift">Despliegue de Aplicaciones en OpenShift</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_métodos_principales_de_despliegue">Métodos principales de despliegue</h3>
<div class="paragraph">
<p>OpenShift ofrece múltiples enfoques para desplegar aplicaciones:</p>
</div>
<div class="paragraph">
<p><strong>1. Desde repositorio Git (Source-to-Image - S2I)</strong>:
- Construcción automática de imágenes desde código fuente
- Ejemplo con CLI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc new-app --name=mi-app https://github.com/usuario/repo.git</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>2. Desde imagen de contenedor existente</strong>:
- Uso de imágenes de registros públicos/privados
- Ejemplo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc new-app --name=mi-app --docker-image=registry.redhat.io/ubi8/nginx-120</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>3. Desde Dockerfile</strong>:
- Construcción personalizada usando Dockerfile
- Ejemplo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc new-app --name=mi-app --dockerfile=$'FROM ubi8/nodejs-16\nCOPY . .\nCMD ["npm", "start"]'</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>4. Desde definición YAML/JSON</strong>:
- Despliegue declarativo usando manifiestos
- Ejemplo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc apply -f deployment.yml</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_flujo_completo_de_despliegue">Flujo completo de despliegue</h3>
<div class="paragraph">
<p><strong>Paso 1: Preparar entorno</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Iniciar sesión
oc login -u &lt;usuario&gt; -p &lt;contraseña&gt; &lt;api_server&gt;

# Crear proyecto
oc new-project mi-proyecto</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Paso 2: Construir y desplegar aplicación</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Opción 1: Desde Git (S2I)
oc new-app --name=nodejs-app https://github.com/galvarado/node-app-openshift-example.git

# Opción 2: Subir imagen personalizada
docker build -t nodejs-demo .
docker tag nodejs-demo &lt;registry_route&gt;/mi-proyecto/nodejs-demo
REGISTRY=$(oc get route default-route -n openshift-image-registry --template='{{ .spec.host }}')
docker push $REGISTRY/mi-proyecto/nodejs-demo
oc new-app --name=nodejs-app --image=$REGISTRY/mi-proyecto/nodejs-demo</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Paso 3: Exponer aplicación</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Crear servicio
oc expose deployment/nodejs-app --port=8080

# Crear ruta externa
oc expose svc/nodejs-app --name=mi-ruta</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Paso 4: Verificar despliegue</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Listar recursos
oc get pods,svc,routes

# Ver logs
oc logs -f deployment/nodejs-app

# Probar aplicación
curl http://$(oc get route mi-ruta -o jsonpath='{.spec.host}')</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_recursos_avanzados">Recursos avanzados</h3>
<div class="paragraph">
<p><strong>DeploymentConfig vs Deployment</strong>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Característica</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DeploymentConfig</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployment (Kubernetes)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Estrategias despliegue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Personalizables</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Estándar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Triggers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configurables</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Limitados</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rollback</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oc rollback</code> nativo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requiere revisiones manuales</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Historial</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mantiene revisiones</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Limitado</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Despliegues Serverless</strong>:</div>
<ul>
<li>
<p>Escalado automático a cero</p>
</li>
<li>
<p>Configuración básica:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>apiVersion: serving.knative.dev/v1
kind: Service
metadata:
  name: serverless-app
spec:
  template:
    spec:
      containers:
        - image: docker.io/library/nodejs-demo</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Gestión de actualizaciones</strong>:
- Rolling updates:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc set triggers dc/nodejs-app --from-config --auto</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Rollback automático:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>oc rollout undo dc/nodejs-app</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mejores_prácticas">Mejores prácticas</h3>
<div class="listingblock">
<div class="title"><strong>Health Checks</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">livenessProbe:
  httpGet:
    path: /health
    port: 8080
  initialDelaySeconds: 15
readinessProbe:
  tcpSocket:
    port: 8080
  initialDelaySeconds: 5</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>Configuración mediante ConfigMaps</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc create configmap app-config --from-file=config.properties
oc set env deployment/nodejs-app --from=configmap/app-config</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>Gestión de secretos</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc create secret generic db-creds --from-literal=username=admin --from-literal=password=S3cr3t
oc set env deployment/nodejs-app --from=secret/db-creds</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>Autoscaling</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc autoscale deployment/nodejs-app --min=2 --max=10 --cpu-percent=80</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_solución_de_problemas_comunes_2">Solución de problemas comunes</h3>
<div class="paragraph">
<p><strong>Error: Cannot create container</strong>:
- Verificar SecurityContextConstraints (SCC):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc adm policy add-scc-to-user anyuid -z default</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Imagen no accesible</strong>:
- Configurar pull secret:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc create secret docker-registry redhat-registry \
  --docker-server=registry.redhat.io \
  --docker-username=&lt;user&gt; \
  --docker-password=&lt;token&gt;
oc secrets link default redhat-registry --for=pull</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Problemas de red</strong>:
- Diagnosticar servicios:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc get endpoints
oc rsh &lt;pod&gt; curl -v http://&lt;servicio&gt;:&lt;puerto&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_uso_de_dockerfile_y_source_to_image_s2i">Uso de Dockerfile y Source-to-Image (S2I)</h3>
<div class="sect3">
<h4 id="_dockerfile_en_openshift">Dockerfile en OpenShift</h4>
<div class="paragraph">
<p>OpenShift permite construir imágenes de contenedor utilizando Dockerfile, lo que proporciona flexibilidad y control sobre el proceso de construcción. Aunque OpenShift se basa en Kubernetes, la construcción de imágenes con Dockerfile sigue siendo una práctica común y recomendada para aplicaciones que requieren personalización específica o pasos de construcción complejos.</p>
</div>
<div class="ulist">
<div class="title">OpenShift permite construir imágenes a partir de un Dockerfile de varias formas:</div>
<ul>
<li>
<p>Puedes almacenar el Dockerfile en un repositorio Git junto con el código fuente de la aplicación, lo que facilita el control de versiones y la gestión del ciclo de vida del contenedor.</p>
</li>
<li>
<p>OpenShift utiliza un recurso llamado <code>BuildConfig</code> para definir cómo se construirá la imagen. En el <code>BuildConfig</code>, puedes especificar la ruta al Dockerfile o incluso incluirlo de forma "inline" dentro del propio manifiesto YAML.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Ejemplo de <code>BuildConfig</code> usando un Dockerfile desde un repositorio Git, podemos definirlo de la siguiente manera en un archivo YAML con el nombre <code>buildconfig.yaml</code>:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: build.openshift.io/v1
kind: BuildConfig
metadata:
  name: mi-aplicacion
spec:
  source:
    type: Git
    git:
      uri: https://github.com/usuario/mi-repo
    contextDir: app
  strategy:
    type: Docker
    dockerStrategy:
      dockerfilePath: Dockerfile
  output:
    to:
      kind: ImageStreamTag
      name: mi-aplicacion:latest</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para ejecutar el buildconfig y construir la imagen, puedes usar el siguiente comando en la CLI de OpenShift:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc create -f buildconfig.yaml</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>También es posible construir la imagen a partir de un Dockerfile local usando <code>oc new-build --binary</code>, subir los archivos y lanzar la construcción con <code>oc start-build</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_source_to_image_s2i">Source-to-Image (S2I)</h4>
<div class="paragraph">
<p>Source-to-Image (S2I) es una herramienta y marco de trabajo que permite construir imágenes de contenedor directamente a partir del código fuente de la aplicación, sin necesidad de escribir un Dockerfile.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>S2I utiliza imágenes "builder" predefinidas que contienen el entorno de ejecución y las herramientas necesarias para compilar y ejecutar la aplicación.</p>
</li>
<li>
<p>El proceso básico de S2I es:</p>
<div class="ulist">
<ul>
<li>
<p>Inicia un contenedor a partir de la imagen builder.</p>
</li>
<li>
<p>Descarga el código fuente de la aplicación (por ejemplo, desde un repositorio Git).</p>
</li>
<li>
<p>Inyecta el código fuente y ejecuta scripts de ensamblado (assemble) para instalar dependencias y preparar la aplicación.</p>
</li>
<li>
<p>Crea una nueva imagen lista para ejecutar la aplicación.</p>
</li>
</ul>
</div>
</li>
<li>
<p>En OpenShift, puedes crear una aplicación S2I desde la consola web ("From Git") o usando la CLI con <code>oc new-app</code> especificando el builder y el repositorio de código fuente.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Para listar las imágenes builder (imagestream) disponibles en OpenShift, puedes usar:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc get is -n openshift</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_resumen_7">Resumen</h4>
<div class="ulist">
<ul>
<li>
<p>Usa Dockerfile cuando necesitas control total sobre la construcción de la imagen o cuando tu stack no está soportado por imágenes builder S2I.</p>
</li>
<li>
<p>Usa S2I para acelerar el desarrollo y despliegue de aplicaciones estándar, aprovechando la automatización y buenas prácticas integradas en las imágenes builder de OpenShift.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_despliegue_automatizado_y_pipelines_cicd_en_openshift">Despliegue automatizado y pipelines CI/CD en OpenShift</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_openshift_pipelines_tekton">OpenShift Pipelines (Tekton)</h3>
<div class="ulist">
<div class="title"><strong>Arquitectura basada en Kubernetes</strong>:</div>
<ul>
<li>
<p><code>Tasks</code>: Pasos reutilizables (build, test, deploy)</p>
</li>
<li>
<p><code>Pipelines</code>: Orquestación de múltiples <code>Tasks</code></p>
</li>
<li>
<p><code>PipelineRuns</code>: Ejecuciones concretas de pipelines, con parámetros y recursos específicos</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title"><strong>Ejemplo de pipeline completo</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: tekton.dev/v1beta1
kind: Pipeline
metadata:
  name: vote-app-pipeline
spec:
  tasks:
    - name: build-ui
      taskRef:
        name: s2i-nodejs
      params:
        - name: IMAGE
          value: quay.io/myproject/vote-ui:latest
    - name: deploy-prod
      runAfter: [test]
      taskRef:
        name: openshift-client
      params:
        - name: SCRIPT
          value: |
            oc set triggers deployment/vote-ui --auto</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para ejecutar el pipeline, con el siguiente comando:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">tkn pipeline start vote-app-pipeline --showlog</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ejemplo de PipelineRun con nombre de archivo: <code>build-and-deploy.yaml</code>:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: tekton.dev/v1beta1
kind: PipelineRun
metadata:
  name: build-and-deploy-run-001
spec:
  pipelineRef:
    name: build-and-deploy
  params:
    - name: deployment-name
      value: mi-aplicacion
  workspaces:
    - name: shared-workspace
      persistentVolumeClaim:
        claimName: mi-pvc
  serviceAccountName: pipeline
  timeout: "1h0m0s"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para iniciar el PipelineRun, usa:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">tkn pipeline start build-and-deploy \
  -p deployment-name=mi-aplicacion \
  -w name=shared-workspace,claimName=mi-pvc \
  --use-param-defaults</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_integración_con_gitops_argo_cd">Integración con GitOps (Argo CD)</h3>
<div class="olist arabic">
<div class="title"><strong>Patrón de implementación</strong>:</div>
<ol class="arabic">
<li>
<p>Cambios en Git desencadenan pipelines</p>
</li>
<li>
<p>Pipeline actualiza manifiestos en repositorio GitOps</p>
</li>
<li>
<p>Argo CD sincroniza estado con clúster</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title"><strong>Configuración básica</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: vote-app
spec:
  destination:
    namespace: vote-prod
    server: https://openshift:6443
  source:
    path: environments/prod
    repoURL: https://github.com/myteam/gitops-repo
    targetRevision: main
  syncPolicy:
    automated:
      selfHeal: true
      prune: true</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_automatización_con_ansible">Automatización con Ansible</h3>
<div class="olist arabic">
<div class="title"><strong>Flujo de automatización</strong>:</div>
<ol class="arabic">
<li>
<p>Conexión a API de OpenShift</p>
</li>
<li>
<p>Ejecución de playbooks para gestión de recursos</p>
</li>
<li>
<p>Despliegue declarativo con colecciones certificadas</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title"><strong>Playbook de ejemplo</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">- name: Deploy Redis application
  hosts: localhost
  tasks:
    - name: Create namespace
      k8s:
        api_version: v1
        kind: Namespace
        name: guestbook
    - name: Deploy Redis leader
      k8s:
        definition: "{{ lookup('file', 'redis-leader.yaml') }}"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_plantillas_de_pipelines_comunes">Plantillas de pipelines comunes</h3>
<div class="listingblock">
<div class="title"><strong>Pipeline multi-etapa</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-graph LR" data-lang="graph LR">A[CI Build] --&gt; B(Unit Tests)
B --&gt; C{SonarQube Scan}
C --&gt;|Pass| D[Build Image]
D --&gt; E(Deploy to DEV)
E --&gt; F[Integration Tests]
F --&gt; G{Promote to QA?}
G --&gt;|Yes| H[Deploy to QA]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>Pipeline serverless</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spec:
  tasks:
    - name: build
      taskRef:
        name: buildah
    - name: deploy-serverless
      taskRef:
        name: kn
      params:
        - name: ARGS
          value: ["service", "create", "vote-service", "--image=$(outputs.resources.image.url)"]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mejores_prácticas_2">Mejores prácticas</h3>
<div class="listingblock">
<div class="title"><strong>Gestión de secretos</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc create secret generic git-creds --type=kubernetes.io/basic-auth --from-literal=username=&lt;user&gt; --from-literal=password=&lt;token&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>Escalado automático de recursos</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">resources:
  - name: build-image
    type: image
  - name: source-repo
    type: git
    url: https://github.com/myorg/myrepo
    revision: main
    secretRef:
      name: git-creds</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>Monitorización de pipelines</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">tkn pipeline logs vote-app-pipeline -f
tkn pipeline describe vote-app-pipeline</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_solución_de_problemas">Solución de problemas</h3>
<div class="paragraph">
<p><strong>Problema común</strong>: Fallos en montaje de volúmenes
.<strong>Solución</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">workspaces:
  - name: source-workspace
    persistentVolumeClaim:
      claimName: mypvc</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Problema común</strong>: Permisos insuficientes
<strong>Solución</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc adm policy add-cluster-role-to-user edit system:serviceaccount:pipeline:tekton-pipelines</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_componentes_fundamentales_de_almacenamiento_en_openshift">Componentes fundamentales de almacenamiento en OpenShift</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_tipos_de_almacenamiento">Tipos de almacenamiento</h3>
<div class="paragraph">
<p><strong>Almacenamiento efímero</strong>
- <strong>emptyDir</strong>: Volumen temporal para compartir datos entre contenedores dentro de un mismo Pod. Los datos se eliminan cuando el Pod finaliza.
- <strong>hostPath</strong>: Monta un directorio del nodo trabajador en el Pod. Útil para pruebas, pero no recomendado para producción.</p>
</div>
<div class="paragraph">
<p><strong>Almacenamiento persistente</strong>
- <strong>Volúmenes Persistentes (PV)</strong>: Recurso físico de almacenamiento en el clúster, gestionado por el administrador.
- <strong>Persistent Volume Claims (PVC)</strong>: Solicitud por parte de un usuario o aplicación para obtener un volumen persistente. El sistema asigna un PV disponible que cumpla los requisitos.
- <strong>StorageClass</strong>: Define el tipo de almacenamiento y el aprovisionador que lo gestiona (por ejemplo, SSD, Ceph, NFS, etc.).</p>
</div>
</div>
<div class="sect2">
<h3 id="_openshift_data_foundation_odf">OpenShift Data Foundation (ODF)</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Solución unificada</strong> para gestionar almacenamiento persistente en bloques, archivos y objetos, tanto en la nube como on-premise.</p>
</li>
<li>
<p><strong>Basada en Ceph</strong>: Ofrece alta disponibilidad, escalabilidad y tolerancia a fallos.</p>
</li>
<li>
<p><strong>Aprovisionamiento dinámico</strong>: Permite crear volúmenes bajo demanda mediante StorageClass y PVC.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_interfaz_de_almacenamiento_de_contenedores_csi">Interfaz de almacenamiento de contenedores (CSI)</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Plugins CSI</strong>: Permiten a OpenShift consumir almacenamiento de múltiples proveedores (AWS, Azure, Ceph, Oracle, etc.).</p>
</li>
<li>
<p><strong>Traducción de solicitudes</strong>: Convierte las PVC en llamadas específicas al backend de almacenamiento.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ejemplo_de_configuración">Ejemplo de configuración</h3>
<div class="listingblock">
<div class="title"><strong>Definición de StorageClass</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: standard
provisioner: kubernetes.io/aws-ebs
parameters:
  type: gp2</code></pre>
</div>
</div>
<div class="paragraph">
<p>En este ejemplo, se define una clase de almacenamiento llamada <code>standard</code> que utiliza EBS de AWS con tipo de volumen <code>gp2</code>, lo que permite aprovisionar volúmenes persistentes de forma dinámica.</p>
</div>
<div class="listingblock">
<div class="title"><strong>Solicitud de volumen persistente (PVC)</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: mi-pvc
spec:
  accessModes:
    - ReadWriteOnce # Acceso exclusivo para un nodo
  resources:
    requests:
      storage: 10Gi
  storageClassName: standard</code></pre>
</div>
</div>
<div class="paragraph">
<p>En este ejemplo, se crea un PVC llamado <code>mi-pvc</code> que solicita 10 GiB de almacenamiento con acceso de lectura/escritura exclusivo para un nodo, utilizando la clase de almacenamiento <code>standard</code>.</p>
</div>
<div class="ulist">
<div class="title">Los accessModes más comunes son:</div>
<ul>
<li>
<p><code>ReadWriteOnce</code>: Acceso de lectura/escritura exclusivo para un nodo.</p>
</li>
<li>
<p><code>ReadOnlyMany</code>: Acceso de solo lectura para múltiples nodos.</p>
</li>
<li>
<p><code>ReadWriteMany</code>: Acceso de lectura/escritura para múltiples nodos.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title"><strong>Definición de PersistentVolume (PV)</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: PersistentVolume
metadata:
  name: mi-pv
spec:
  capacity:
    storage: 10Gi
  accessModes:
    - ReadWriteOnce
  persistentVolumeReclaimPolicy: Retain
  storageClassName: standard
  hostPath: /var/lib/mydata</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>Montaje en un Pod</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Pod
metadata:
  name: mi-pod
spec:
  containers:
    - name: mi-contenedor
      image: nginx
      volumeMounts:
        - mountPath: "/var/www/html"
          name: almacenamiento
  volumes:
    - name: almacenamiento
      persistentVolumeClaim:
        claimName: mi-pvc</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resumen_de_conceptos_clave">Resumen de conceptos clave</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Componente</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Función principal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Volumen (Volume)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Montaje de almacenamiento en un Pod, puede ser efímero o persistente</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PersistentVolume (PV)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recurso físico de almacenamiento persistente en el clúster</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PersistentVolumeClaim</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Solicitud de almacenamiento persistente por parte de una aplicación</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">StorageClass</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define el tipo y aprovisionador de almacenamiento</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plugin para integración con proveedores externos de almacenamiento</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift Data Foundation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Solución de almacenamiento definido por software para OpenShift</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_ejemplo_completo_aplicación_wordpress_en_openshift">Ejemplo completo: Aplicación WordPress en OpenShift</h3>
<div class="sect3">
<h4 id="_arquitectura_del_despliegue">Arquitectura del despliegue</h4>
<div class="paragraph">
<p>La aplicación WordPress se desplegará utilizando un Pod que ejecuta el contenedor de WordPress, un servicio para exponer la aplicación y un volumen persistente para almacenar los datos de la base de datos y los archivos de WordPress.</p>
</div>
<div class="ulist">
<div class="title">La arquitectura incluye:</div>
<ul>
<li>
<p><strong>Pod</strong>: Contenedor de WordPress y PHP.</p>
</li>
<li>
<p><strong>Servicio</strong>: Exposición del Pod a través de una IP estable.</p>
</li>
<li>
<p><strong>Volumen Persistente</strong>: Almacenamiento de datos de WordPress y base de datos.</p>
</li>
<li>
<p><strong>Base de Datos</strong>: Utilizando MySQL como backend.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_paso_1_crear_proyecto_y_secretos">Paso 1: Crear proyecto y secretos</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Crear proyecto
oc new-project wordpress-demo

# Generar secretos para MySQL
oc create secret generic mysql-secrets \
  --from-literal=mysql-root-password=SuperSecret \
  --from-literal=mysql-database=wordpress \
  --from-literal=mysql-user=wpuser \
  --from-literal=mysql-password=Wp@ssw0rd</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_paso_2_desplegar_mysql">Paso 2: Desplegar MySQL</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml"># mysql-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: mysql
spec:
  replicas: 1
  selector:
    matchLabels:
      app: mysql
  template:
    metadata:
      labels:
        app: mysql
    spec:
      containers:
      - name: mysql
        image: registry.redhat.io/rhscl/mysql-80-rhel7
        env:
        - name: MYSQL_ROOT_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mysql-secrets
              key: mysql-root-password
        - name: MYSQL_DATABASE
          valueFrom:
            secretKeyRef:
              name: mysql-secrets
              key: mysql-database
        - name: MYSQL_USER
          valueFrom:
            secretKeyRef:
              name: mysql-secrets
              key: mysql-user
        - name: MYSQL_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mysql-secrets
              key: mysql-password
        ports:
        - containerPort: 3306
        volumeMounts:
        - name: mysql-pv-storage
          mountPath: /var/lib/mysql
      volumes:
      - name: mysql-pv-storage
        persistentVolumeClaim:
          claimName: mysql-pvc

---
# mysql-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: mysql
spec:
  ports:
  - port: 3306
  selector:
    app: mysql</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_paso_3_desplegar_wordpress">Paso 3: Desplegar WordPress</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml"># wordpress-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: wordpress
spec:
  replicas: 1
  selector:
    matchLabels:
      app: wordpress
  template:
    metadata:
      labels:
        app: wordpress
    spec:
      containers:
      - name: wordpress
        image: registry.redhat.io/rhscl/wordpress-56-rhel7
        env:
        - name: WORDPRESS_DB_HOST
          value: mysql
        - name: WORDPRESS_DB_USER
          valueFrom:
            secretKeyRef:
              name: mysql-secrets
              key: mysql-user
        - name: WORDPRESS_DB_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mysql-secrets
              key: mysql-password
        - name: WORDPRESS_DB_NAME
          valueFrom:
            secretKeyRef:
              name: mysql-secrets
              key: mysql-database
        ports:
        - containerPort: 8080
          name: http-port
        - containerPort: 8443
          name: https-port

---
# wordpress-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: wordpress
spec:
  ports:
  - name: http
    port: 80
    targetPort: http-port
  - name: https
    port: 443
    targetPort: https-port
  selector:
    app: wordpress</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_paso_4_exponer_la_aplicación">Paso 4: Exponer la aplicación</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Crear ruta HTTPS
oc create route edge wordpress-route \
  --service=wordpress \
  --port=https \
  --insecure-policy=Redirect</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_paso_5_configuración_avanzada">Paso 5: Configuración avanzada</h3>
<div class="paragraph">
<p><strong>Persistent Volume Claims</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml"># mysql-pvc.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: mysql-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 5Gi

# wordpress-pvc.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: wordpress-pvc
spec:
  accessModes:
    - ReadWriteMany
  resources:
    requests:
      storage: 3Gi</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Configuración de healthcheck</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">livenessProbe:
  httpGet:
    path: /wp-login.php
    port: http-port
  initialDelaySeconds: 120
  periodSeconds: 10

readinessProbe:
  httpGet:
    path: /wp-login.php
    port: http-port
  initialDelaySeconds: 30
  periodSeconds: 5</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_verificación_final">Verificación final</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Comprobar recursos
oc get pods,svc,route,pvc

# Obtener URL de acceso
echo "URL de WordPress: https://$(oc get route wordpress-route -o jsonpath='{.spec.host}')"

# Ver logs
oc logs -f deployment/wordpress</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_diagrama_de_flujo_completo">Diagrama de flujo completo</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">graph TD
    A[oc new-project] --&gt; B[oc create secret]
    B --&gt; C[oc apply -f mysql-pvc.yaml]
    C --&gt; D[oc apply -f mysql-deployment.yaml]
    D --&gt; E[oc apply -f mysql-service.yaml]
    E --&gt; F[oc apply -f wordpress-pvc.yaml]
    F --&gt; G[oc apply -f wordpress-deployment.yaml]
    G --&gt; H[oc apply -f wordpress-service.yaml]
    H --&gt; I[oc create route]
    I --&gt; J[Acceso vía navegador]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_routes_y_exposición_de_servicios_en_openshift">Routes y Exposición de Servicios en OpenShift</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_conceptos_fundamentales">Conceptos fundamentales</h3>
<div class="paragraph">
<p>Las <strong>rutas (Routes)</strong> son el mecanismo principal en OpenShift para exponer servicios externamente mediante nombres de host personalizados. Funcionan como una capa de encaminamiento HTTP/HTTPS que se integra con el controlador Ingress de OpenShift.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tipos_de_rutas_y_terminación_tls">Tipos de rutas y terminación TLS</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tipo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Caso de uso</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ejemplo CLI</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Simple</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tráfico HTTP no cifrado</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oc expose svc/mi-servicio</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Edge</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terminación TLS en el router (tráfico no cifrado al pod)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oc create route edge &#8230;&#8203;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Passthrough</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLS ininterrumpido hasta el pod (útil para HTTP/2)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oc create route passthrough&#8230;&#8203;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Re-encrypt</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terminación TLS en router + nueva encriptación al pod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oc create route reencrypt&#8230;&#8203;</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_creación_de_rutas_mediante_cli">Creación de rutas mediante CLI</h3>
<div class="listingblock">
<div class="title"><strong>Exposición básica</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Exponer servicio como ruta HTTP simple
oc expose svc/mi-servicio

# Crear ruta HTTPS con terminación edge
oc create route edge mi-ruta-segura \
  --service=mi-servicio \
  --port=8080 \
  --insecure-policy=Redirect</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>Definición YAML avanzada</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: ruta-ejemplo
spec:
  host: app.ejemplo.com
  port:
    targetPort: 8080
  to:
    kind: Service
    name: mi-servicio
  tls:
    termination: edge
    key: |-
      -----BEGIN PRIVATE KEY-----
      ...
    certificate: |-
      -----BEGIN CERTIFICATE-----
      ...</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Gestión de nombres de host</div>
<ul>
<li>
<p><strong>Hostnames automáticos</strong>: Formato <code>&lt;servicio&gt;-&lt;proyecto&gt;.&lt;dominio-ingress&gt;</code></p>
</li>
<li>
<p><strong>Dominios personalizados</strong>: Configuración en <code>spec.host</code> del recurso Route</p>
</li>
<li>
<p><strong>Wildcard support</strong>: Rutas comodín para subdominios dinámicos</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_verificación_y_diagnóstico">Verificación y diagnóstico</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Listar rutas existentes
oc get routes

# Inspeccionar configuración
oc describe route/mi-ruta

# Probar acceso
curl -v http://$(oc get route mi-ruta -o jsonpath='{.spec.host}')</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_consideraciones_clave">Consideraciones clave</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Seguridad</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Uso obligatorio de <code>insecurePolicy: Redirect</code> para forzar HTTPS</p>
</li>
<li>
<p>Rotación automática de certificados con OpenShift Service CA</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Rendimiento</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Balanceo de carga round-robin por defecto</p>
</li>
<li>
<p>Soporte para sesiones persistentes con <code>spec.sessionAffinity</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Compatibilidad</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Integración con certificados wildcard de Let&#8217;s Encrypt</p>
</li>
<li>
<p>Soporte para WebSockets y HTTP/2</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Nota</strong>: Las rutas son el equivalente avanzado de los Ingress de Kubernetes, ofreciendo funcionalidades adicionales específicas de OpenShift como terminación TLS integrada y seguridad mejorada. Para entornos complejos, se recomienda combinar rutas con operadores como OpenShift Ingress Controller para gestión avanzada de tráfico.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_gestión_de_recursos_pods_servicios_rutas_y_proyectos">Gestión de recursos: pods, servicios, rutas y proyectos.</h3>
<div class="paragraph">
<p>OpenShift organiza y gestiona los recursos de las aplicaciones en contenedores a través de pods, servicios, rutas y proyectos, permitiendo un control granular y seguro sobre el ciclo de vida de las aplicaciones.</p>
</div>
<div class="sect3">
<h4 id="_pods_2">Pods</h4>
<div class="paragraph">
<p>Los pods son la unidad mínima de ejecución en OpenShift y Kubernetes. Cada pod puede contener uno o varios contenedores que comparten red y almacenamiento. El programador (<code>kube-scheduler</code>) decide en qué nodo desplegar cada pod según la capacidad, requisitos y políticas del clúster. El estado y configuración de los pods se gestiona a través del API server, que almacena la información en etcd.</p>
</div>
<div class="listingblock">
<div class="title"><strong>Ejemplo de creación de pod:</strong></div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Pod
metadata:
  name: mi-pod
spec:
  containers:
    - name: nginx
      image: nginx:1.21
      ports:
        - containerPort: 80</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Comando para crear un pod:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc create -f mi-pod.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Comandos útiles:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc get pods
oc describe pod &lt;nombre&gt;
oc logs &lt;nombre&gt;
oc rsh &lt;nombre&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_servicios_2">Servicios</h4>
<div class="paragraph">
<p>Los servicios agrupan un conjunto de pods bajo una única dirección IP y nombre DNS, permitiendo el acceso estable a las aplicaciones incluso si los pods subyacentes cambian. Los servicios pueden ser de tipo <code>ClusterIP</code> (interno), <code>NodePort</code> (exposición por puerto del nodo), o <code>LoadBalancer</code> (balanceador externo). El API server gestiona la creación y actualización de servicios.</p>
</div>
<div class="paragraph">
<p><strong>Ejemplo de creación de servicio:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Service
metadata:
  name: mi-servicio
spec:
  selector:
    app: mi-app
  ports:
    - protocol: TCP
      port: 80
      targetPort: 8080</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Comandos útiles:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc get services
oc describe service &lt;nombre&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rutas_routes">Rutas (Routes)</h4>
<div class="paragraph">
<p>Las rutas permiten exponer servicios HTTP/HTTPS al exterior, asignando un nombre de host accesible públicamente. OpenShift soporta varios tipos de rutas según la terminación TLS: simple (sin cifrado), edge (TLS termina en el router), passthrough (TLS de extremo a extremo), y reencrypt (TLS termina y se vuelve a cifrar en el router).</p>
</div>
<div class="paragraph">
<p><strong>Ejemplo de creación de ruta:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc expose service/mi-servicio</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Ver rutas y host asignado:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc get routes
oc describe route &lt;nombre&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Tipos de rutas y casos de uso:</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tipo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Caso de uso principal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Simple</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP sin cifrado</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Edge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLS termina en el router, tráfico interno sin cifrar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Passthrough</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLS extremo a extremo, el pod gestiona el cifrado</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reencrypt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLS termina y se vuelve a cifrar en el router, tráfico interno cifrado</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_proyectos">Proyectos</h4>
<div class="paragraph">
<p>Un proyecto en OpenShift es un agrupamiento lógico de recursos (equivalente a un namespace de Kubernetes, pero con información adicional). Permite aislar aplicaciones, controlar el acceso y gestionar cuotas de recursos. Cada vez que se crea un proyecto, se crea un namespace asociado. Los usuarios pueden cambiar de proyecto, listar los existentes y gestionar su ciclo de vida.</p>
</div>
<div class="listingblock">
<div class="title">Crear un nuevo proyecto</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc new-project mi-proyecto</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listar proyectos disponibles</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc get projects</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Cambiar de proyecto</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc project mi-proyecto</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ver detalles de un proyecto</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc describe project mi-proyecto</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Eliminar un proyecto</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc delete project mi-proyecto</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Crear un proyecto:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc new-project ejemplo</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Desplegar una aplicación:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc new-app nginx</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Exponer el servicio:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc expose deployment/nginx</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Obtener la ruta pública:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc get routes</code></pre>
</div>
</div>
<div class="paragraph">
<p>Esto permite gestionar de forma estructurada y segura el ciclo de vida de las aplicaciones en OpenShift, integrando pods, servicios, rutas y proyectos en una arquitectura robusta y escalable.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tolerancia_a_fallos_autoescalado_y_balanceo_de_carga_en_openshift">Tolerancia a fallos, autoescalado y balanceo de carga en OpenShift</h3>
<div class="paragraph">
<p>OpenShift proporciona mecanismos avanzados para garantizar la alta disponibilidad, escalabilidad y distribución eficiente del tráfico en aplicaciones cloud-native. A continuación se describen los tres pilares principales:</p>
</div>
<div class="sect3">
<h4 id="_tolerancia_a_fallos">Tolerancia a fallos</h4>
<div class="ulist">
<ul>
<li>
<p>OpenShift utiliza ReplicaSets para mantener el número deseado de pods en ejecución. Si un pod falla, el sistema lo reemplaza automáticamente.</p>
</li>
<li>
<p>La arquitectura permite distribuir nodos entre distintos dominios de fallo (failure domains), de modo que la caída de un nodo o zona no afecta a la disponibilidad global.</p>
</li>
<li>
<p>Las herramientas de monitoreo y logs integradas facilitan la detección y recuperación ante fallos.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_autoescalado">Autoescalado</h4>
<div class="ulist">
<ul>
<li>
<p>El Horizontal Pod Autoscaler (HPA) ajusta automáticamente el número de réplicas de pods según métricas como CPU o memoria.*</p>
</li>
<li>
<p>La configuración típica incluye parámetros como minReplicas, maxReplicas y el porcentaje objetivo de uso de CPU.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">En el siguiente ejemplo, se configura un HPA para una aplicación llamada "mi-app" que escala entre 2 y 10 réplicas, manteniendo un uso promedio de CPU del 80%:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: ejemplo-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: mi-app
  minReplicas: 2
  maxReplicas: 10
  metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 80</code></pre>
</div>
</div>
<div class="paragraph">
<p>El HPA reacciona en 1-2 minutos tras detectar la necesidad de escalado.</p>
</div>
</div>
<div class="sect3">
<h4 id="_balanceo_de_carga">Balanceo de carga</h4>
<div class="ulist">
<div class="title">OpenShift implementa varios mecanismos para distribuir el tráfico entre los pods disponibles:</div>
<ul>
<li>
<p>Los servicios de OpenShift (Service) distribuyen el tráfico entre los pods disponibles, usando balanceo de carga en capa 4 (TCP/UDP) o capa 7 (HTTP/HTTPS).</p>
</li>
<li>
<p>Las rutas (Route) gestionan el acceso externo, permitiendo reglas avanzadas de enrutamiento.</p>
</li>
<li>
<p>Es posible integrar balanceadores externos (como NSX-T o VPC Load Balancer) para distribuir el tráfico entrante entre los nodos del clúster.</p>
</li>
<li>
<p>La política externalTrafficPolicy: Local permite conservar la IP de origen en el tráfico balanceado.
Estos mecanismos trabajan en conjunto para ofrecer aplicaciones resilientes, escalables y con alta disponibilidad en entornos OpenShift.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_actualizaciones_continuas_y_rollback_de_aplicaciones_en_openshift">Actualizaciones continuas y rollback de aplicaciones en OpenShift</h3>
<div class="paragraph">
<p>OpenShift permite gestionar el ciclo de vida de las aplicaciones mediante despliegues continuos y mecanismos de rollback para garantizar la disponibilidad y la estabilidad del servicio ante posibles fallos en las actualizaciones.</p>
</div>
<div class="sect3">
<h4 id="_actualizaciones_continuas">Actualizaciones continuas</h4>
<div class="ulist">
<ul>
<li>
<p>Las actualizaciones continuas se gestionan mediante estrategias de despliegue como rolling update, blue-green deployment o canary deployment.</p>
</li>
<li>
<p>En un despliegue rolling update, los pods antiguos se reemplazan gradualmente por nuevos pods con la versión actualizada, minimizando el downtime.</p>
</li>
<li>
<p>Es recomendable definir sondas de readiness y liveness para asegurar que los pods actualizados están listos antes de recibir tráfico.</p>
</li>
<li>
<p>El proceso típico de actualización es:</p>
<div class="ulist">
<ul>
<li>
<p>Modificar el código y guardar los cambios en el repositorio.</p>
</li>
<li>
<p>Lanzar un nuevo build en OpenShift, que genera una nueva imagen de la aplicación.</p>
</li>
<li>
<p>OpenShift realiza automáticamente un nuevo deployment, eliminando los pods antiguos y creando los nuevos con la versión actualizada.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_rollback_de_aplicaciones">Rollback de aplicaciones</h4>
<div class="ulist">
<ul>
<li>
<p>Si surge un problema tras una actualización, OpenShift permite volver rápidamente a una versión anterior de la aplicación (rollback).</p>
</li>
<li>
<p>El historial de despliegues se almacena como revisiones, permitiendo identificar y volver a cualquier versión anterior.</p>
</li>
<li>
<p>Comandos útiles:
.Ver el historial de despliegues:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>oc rollout history deployment/&lt;nombre&gt;</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Realizar un rollback al último despliegue exitoso:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc rollout undo deployment/&lt;nombre&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">También se puede especificar una versión concreta:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc rollout undo deployment/&lt;nombre&gt; --to-revision=&lt;número&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>El rollback crea un nuevo ReplicaSet a partir de la plantilla de la revisión seleccionada y deshabilita temporalmente los triggers automáticos para evitar despliegues accidentales.</p>
</li>
<li>
<p>Es posible comprobar el estado de la aplicación tras el rollback usando port-forward o accediendo a los logs de los pods.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_resumen_8">Resumen</h4>
<div class="paragraph">
<p>OpenShift facilita tanto la actualización continua como la reversión rápida a versiones anteriores, asegurando la continuidad del servicio y la capacidad de respuesta ante incidencias en producción.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_operaciones_avanzadas_con_la_utilidad_de_línea_de_comandos_oc">Operaciones avanzadas con la utilidad de línea de comandos oc</h3>
<div class="paragraph">
<p>La utilidad de línea de comandos <code>oc</code> es fundamental para administrar y automatizar tareas avanzadas en OpenShift. A continuación se describen algunas de las operaciones más potentes y útiles que puedes realizar con esta herramienta.</p>
</div>
<div class="sect3">
<h4 id="_gestión_avanzada_de_pods_y_despliegues">Gestión avanzada de pods y despliegues</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Escalado horizontal manual:</strong> Puedes aumentar o disminuir el número de pods de un despliegue para ajustar la capacidad de la aplicación.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc scale dc/&lt;nombre-deploymentconfig&gt; --replicas=3</code></pre>
</div>
</div>
<div class="paragraph">
<p>Esto crea o elimina pods según el número especificado, permitiendo balancear la carga entre ellos.</p>
</div>
</li>
<li>
<p><strong>Autoescalado:</strong> Configura el autoescalado para que el número de pods se ajuste automáticamente en función del consumo de CPU.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc autoscale dc/&lt;nombre-deploymentconfig&gt; --min 1 --max 5 --cpu-percent=50</code></pre>
</div>
</div>
<div class="paragraph">
<p>Esto crea un Horizontal Pod Autoscaler que monitoriza y escala los pods según la demanda.</p>
</div>
</li>
<li>
<p><strong>Quitar autoescalado:</strong> Si necesitas desactivar el autoescalado, puedes eliminar el HPA asociado.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc delete hpa &lt;nombre-hpa&gt;</code></pre>
</div>
</div>
</li>
<li>
<p><strong>Actualizaciones continuas:</strong> Tras modificar el código y lanzar un nuevo build, OpenShift despliega automáticamente la nueva versión de la aplicación, reemplazando los pods antiguos por los nuevos.</p>
</li>
<li>
<p><strong>Rollback de despliegues:</strong> Si una actualización falla, puedes volver a la versión anterior fácilmente.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc rollout undo dc/&lt;nombre-deploymentconfig&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Esto revierte el despliegue al estado anterior, garantizando la estabilidad del servicio.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_supervisión_y_tolerancia_a_fallos">Supervisión y tolerancia a fallos</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Tolerancia a fallos:</strong> Si un pod falla o es eliminado, OpenShift crea automáticamente uno nuevo para mantener la disponibilidad.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc delete pod/&lt;nombre-pod&gt;
oc get pods</code></pre>
</div>
</div>
</li>
<li>
<p><strong>Balanceo de carga:</strong> Todas las peticiones a la aplicación se distribuyen entre los pods activos, asegurando un servicio robusto y escalable.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_creación_y_gestión_de_proyectos">Creación y gestión de proyectos</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Crear un nuevo proyecto:</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc new-project &lt;nombre-proyecto&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Esto crea un espacio aislado para tus recursos y aplicaciones.</p>
</div>
</li>
<li>
<p><strong>Estado del proyecto:</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc status</code></pre>
</div>
</div>
<div class="paragraph">
<p>Muestra información sobre los recursos y el estado general del proyecto.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_otras_operaciones_útiles">Otras operaciones útiles</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Ayuda y documentación de recursos:</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc explain &lt;recurso&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Por ejemplo, <code>oc explain pods</code> muestra la definición y campos de los pods.</p>
</div>
</li>
<li>
<p><strong>Autocompletado en la terminal:</strong> Puedes habilitar el autocompletado para Bash o Zsh, facilitando el uso de la CLI.</p>
</li>
<li>
<p><strong>Conexión al clúster:</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc login https://&lt;url-cluster&gt; --token=&lt;token&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Esto te autentica y configura el acceso al clúster de OpenShift.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_resumen_9">Resumen</h4>
<div class="paragraph">
<p>La utilidad <code>oc</code> permite realizar operaciones avanzadas como escalado, autoescalado, gestión de despliegues, rollback, tolerancia a fallos, balanceo de carga y administración de proyectos, todo desde la línea de comandos, facilitando la automatización y el control eficiente de entornos OpenShift.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resourcequotas_en_openshift">ResourceQuotas en OpenShift</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Los ResourceQuotas permiten limitar la cantidad de recursos de computación (CPU, memoria) y almacenamiento persistente que pueden ser consumidos por los pods, contenedores y PersistentVolumeClaims dentro de un proyecto (namespace) en OpenShift. Esto ayuda a evitar la contención de recursos y asegura una distribución justa entre proyectos.</p>
</div>
<div class="ulist">
<div class="title">Tipos de cuotas comunes en OpenShift</div>
<ul>
<li>
<p><strong>Resource Quotas</strong>: Limitan el consumo de recursos de CPU, memoria y almacenamiento.</p>
</li>
<li>
<p><strong>Pod Quotas</strong>: Limitan el número total de pods que pueden crearse en un proyecto.</p>
</li>
<li>
<p><strong>Limit Ranges</strong>: Especifican valores mínimos, máximos y por defecto para recursos de contenedores y pods.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_ejemplo_de_resourcequota_en_openshift">Ejemplo de ResourceQuota en OpenShift</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: ResourceQuota
metadata:
  name: compute-resources
  namespace: mi-proyecto
spec:
  hard:
    pods: "10"
    requests.cpu: "1"
    requests.memory: 1Gi
    limits.cpu: "2"
    limits.memory: 2Gi
    persistentvolumeclaims: "5"
    services: "10"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ejemplo_de_limitrange_en_openshift">Ejemplo de LimitRange en OpenShift</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: LimitRange
metadata:
  name: resource-limits
  namespace: mi-proyecto
spec:
  limits:
    - type: Pod
      max:
        cpu: "2"
        memory: "1Gi"
      min:
        cpu: "200m"
        memory: "6Mi"
    - type: Container
      max:
        cpu: "1"
        memory: "512Mi"
      min:
        cpu: "100m"
        memory: "4Mi"
      default:
        cpu: "300m"
        memory: "200Mi"
      defaultRequest:
        cpu: "200m"
        memory: "100Mi"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_seguridad_y_control_de_acceso">Seguridad y Control de Acceso</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La seguridad y el control de acceso en OpenShift se basan en una combinación de buenas prácticas, mecanismos técnicos y políticas que protegen tanto la plataforma como las aplicaciones desplegadas.</p>
</div>
<div class="ulist">
<div class="title">Principios fundamentales</div>
<ul>
<li>
<p>OpenShift protege todos los elementos de la plataforma, desde el sistema operativo hasta los contenedores y las aplicaciones, mediante controles de cifrado, políticas de seguridad y control de acceso estricto.</p>
</li>
<li>
<p>El control de acceso es esencial para garantizar que solo usuarios y sistemas autorizados puedan acceder o modificar los recursos, protegiendo la información confidencial contra accesos no autorizados.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Control de acceso basado en roles (RBAC)</div>
<ul>
<li>
<p>OpenShift utiliza RBAC para definir y gestionar permisos.</p>
</li>
<li>
<p>Los Roles y ClusterRoles especifican conjuntos de permisos a nivel de proyecto (namespace) o de clúster.</p>
</li>
<li>
<p>Los RoleBindings y ClusterRoleBindings asignan estos roles a usuarios, grupos o cuentas de servicio.</p>
</li>
<li>
<p>El RBAC sigue el principio de mínimo privilegio, otorgando solo los permisos estrictamente necesarios según la función o responsabilidad del usuario o sistema.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Autenticación y autorización</div>
<ul>
<li>
<p>El acceso a la API de OpenShift requiere autenticación, validando la identidad de usuarios y servicios mediante integraciones con proveedores de identidad como LDAP, GitHub o Google.</p>
</li>
<li>
<p>Tras la autenticación, la autorización determina qué acciones puede realizar cada usuario o servicio, aplicando las políticas RBAC y otros controles.</p>
</li>
<li>
<p>El control de admisiones valida o modifica las solicitudes antes de que sean procesadas por el servidor API, reforzando las políticas de seguridad.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Aislamiento y segmentación</div>
<ul>
<li>
<p>El uso de proyectos y namespaces permite aislar recursos y limitar el alcance de los permisos, reduciendo el impacto de posibles brechas de seguridad.</p>
</li>
<li>
<p>La microsegmentación y políticas de red, como las que ofrece Calico, permiten controlar el tráfico entre pods, namespaces y servicios, implementando un enfoque de seguridad Zero Trust.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Restricciones de ejecución y políticas de seguridad</div>
<ul>
<li>
<p>OpenShift aplica restricciones mediante Security Context Constraints (SCCs), que limitan las capacidades de los contenedores, como la ejecución como usuario root o el acceso a recursos del host.</p>
</li>
<li>
<p>En general, los contenedores se ejecutan como procesos no-root y con UIDs restringidos por el proyecto, minimizando el riesgo de escalada de privilegios.</p>
</li>
<li>
<p>El acceso SSH a nodos está deshabilitado por defecto y la comunicación entre componentes críticos se realiza de forma cifrada[10].</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Buenas prácticas adicionales</div>
<ul>
<li>
<p>Supervisar y auditar los accesos y actividades en el clúster.</p>
</li>
<li>
<p>Limitar los privilegios de los contenedores y evitar el uso de permisos elevados salvo que sea estrictamente necesario.</p>
</li>
<li>
<p>Segmentar los recursos y usuarios mediante proyectos, namespaces y políticas de red.</p>
</li>
<li>
<p>Mantener actualizado el clúster y aplicar las recomendaciones de seguridad del proveedor.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_autenticación_y_autorización_rbac_htpasswd_grupos_y_usuarios">Autenticación y autorización (RBAC, HTPasswd, grupos y usuarios)</h3>
<div class="paragraph">
<p>OpenShift proporciona un marco robusto de autenticación y autorización para controlar el acceso a recursos y operaciones en el clúster. Los mecanismos principales incluyen RBAC, autenticación mediante HTPasswd, gestión de usuarios y grupos.</p>
</div>
<div class="sect3">
<h4 id="_autenticación">Autenticación</h4>
<div class="paragraph">
<p><strong>La autenticación</strong> verifica la identidad de los usuarios que acceden al clúster. OpenShift soporta múltiples proveedores de identidad, siendo uno de los más sencillos HTPasswd:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>HTPasswd:</strong> Utiliza un archivo plano (<code>htpasswd</code>) que almacena los nombres de usuario y contraseñas cifradas. Este archivo se referencia en la configuración del proveedor de identidad del clúster.</p>
</li>
<li>
<p>Para configurar HTPasswd, se crea un recurso personalizado (CR) de tipo <code>OAuth</code> que referencia el secreto con el archivo generado por la utilidad <code>htpasswd</code>.</p>
</li>
<li>
<p>Tras aplicar la configuración, los usuarios definidos pueden autenticarse con sus credenciales y acceder al clúster.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_usuarios">Usuarios</h4>
<div class="ulist">
<ul>
<li>
<p>Un <strong>usuario</strong> en OpenShift representa a una persona o sistema que interactúa con la plataforma. Los usuarios pueden ser administradores, desarrolladores u operadores.</p>
</li>
<li>
<p>Los usuarios se pueden crear mediante la CLI:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc create user &lt;nombre_usuario&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Para asociar una identidad a un usuario (por ejemplo, tras autenticación con HTPasswd):</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc create useridentitymapping &lt;proveedor&gt;:&lt;usuario&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_grupos">Grupos</h4>
<div class="ulist">
<ul>
<li>
<p>Los <strong>grupos</strong> permiten gestionar permisos de manera colectiva, facilitando la administración de roles y accesos para varios usuarios simultáneamente.</p>
</li>
<li>
<p>Crear un grupo e incluir usuarios:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc adm groups new &lt;nombre_grupo&gt; &lt;usuario1&gt; &lt;usuario2&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Los grupos pueden ser asignados a roles, simplificando la gestión de permisos en equipos o departamentos.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_autorización_y_rbac">Autorización y RBAC</h4>
<div class="paragraph">
<p><strong>La autorización</strong> determina qué acciones puede realizar cada usuario o grupo una vez autenticado, utilizando el modelo de Control de Acceso Basado en Roles (RBAC):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>RBAC</strong> permite definir roles (conjuntos de permisos) y asignarlos a usuarios o grupos mediante <strong>bindings</strong>.</p>
</li>
<li>
<p>Existen dos niveles de roles:</p>
<div class="ulist">
<ul>
<li>
<p><strong>ClusterRoles</strong> y <strong>ClusterRoleBindings</strong>: aplican a todo el clúster.</p>
</li>
<li>
<p><strong>Roles</strong> y <strong>RoleBindings</strong>: aplican a un proyecto (namespace) específico.</p>
</li>
</ul>
</div>
</li>
<li>
<p>El principio de mínimo privilegio recomienda asignar solo los permisos necesarios y revisar periódicamente los roles y bindings.</p>
</li>
<li>
<p>Ejemplo de asignación de un rol de visualización a un usuario en un proyecto:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc adm policy add-role-to-user view &lt;usuario&gt; -n &lt;proyecto&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_buenas_prácticas">Buenas prácticas</h4>
<div class="ulist">
<ul>
<li>
<p>Usar grupos para simplificar la gestión de permisos.</p>
</li>
<li>
<p>Limitar el uso de usuarios con privilegios elevados.</p>
</li>
<li>
<p>Segregar accesos por proyectos para reducir la superficie de ataque.</p>
</li>
<li>
<p>Revisar y eliminar roles o grupos no utilizados.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>OpenShift integra estos mecanismos para garantizar un acceso seguro, flexible y auditable a los recursos del clúster.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gestión_de_secretos_y_configmaps">Gestión de secretos y ConfigMaps</h3>
<div class="paragraph">
<p>OpenShift proporciona mecanismos para separar la configuración y los datos sensibles de las aplicaciones mediante los objetos Secrets y ConfigMaps. Esta aproximación mejora la seguridad, la portabilidad y la flexibilidad de los despliegues.</p>
</div>
<div class="sect3">
<h4 id="_secrets">Secrets</h4>
<div class="ulist">
<ul>
<li>
<p>Un <code>Secret</code> es un objeto diseñado para almacenar información confidencial, como contraseñas, claves, archivos de configuración privados o credenciales de acceso a repositorios.</p>
</li>
<li>
<p>Los Secrets desacoplan los datos sensibles de los pods y pueden ser montados como volúmenes o inyectados como variables de entorno en los contenedores.</p>
</li>
<li>
<p>Los datos en los Secrets se almacenan codificados en base64, aunque esto no es un mecanismo de cifrado fuerte; se recomienda limitar el acceso a estos objetos mediante políticas de control de acceso.</p>
</li>
<li>
<p>Ejemplo de definición de un Secret en YAML:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Secret
metadata:
  name: test-secret
  namespace: my-namespace
type: Opaque
data:
  username: dmFsdWUtMQ0K
  password: dmFsdWUtMg0KDQo=
stringData:
  hostname: myapp.mydomain.com</code></pre>
</div>
</div>
</li>
<li>
<p>Para cambiar un Secret, es necesario eliminar el pod y crear uno nuevo para que recoja la actualización.</p>
</li>
<li>
<p>Es fundamental gestionar los secretos con buenas prácticas de seguridad: acceso autenticado, control de privilegios y auditoría de accesos.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_configmaps">ConfigMaps</h4>
<div class="ulist">
<ul>
<li>
<p>Un <code>ConfigMap</code> es un objeto de la API que almacena datos de configuración no confidenciales en formato clave-valor.</p>
</li>
<li>
<p>Permite desacoplar la configuración de la imagen de la aplicación, facilitando la portabilidad y la actualización de parámetros sin necesidad de reconstruir los contenedores.</p>
</li>
<li>
<p>Los ConfigMaps pueden ser usados por los pods como variables de entorno, argumentos de línea de comandos o archivos montados en volúmenes.</p>
</li>
<li>
<p>Ejemplo de comandos para gestionar ConfigMaps:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc create configmap &lt;configmap_name&gt;
oc describe configmap &lt;configmap_name&gt;
oc get configmap</code></pre>
</div>
</div>
</li>
<li>
<p>Precaución: los ConfigMaps no proporcionan cifrado; no deben usarse para datos sensibles.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_diferencias_y_buenas_prácticas">Diferencias y buenas prácticas</h4>
<div class="ulist">
<ul>
<li>
<p>Usar Secrets para toda información confidencial y restringir su acceso mediante RBAC.</p>
</li>
<li>
<p>Usar ConfigMaps para parámetros de configuración generales que no sean sensibles.</p>
</li>
<li>
<p>Mantener la gestión de ambos recursos centralizada y versionada, y auditar los accesos y cambios.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La correcta gestión de Secrets y ConfigMaps es esencial para la seguridad y la flexibilidad en entornos OpenShift, permitiendo separar la configuración y los datos sensibles del ciclo de vida de las aplicaciones.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_políticas_de_seguridad_y_restricciones_de_contexto_en_openshift">Políticas de seguridad y restricciones de contexto en OpenShift</h3>
<div class="sect3">
<h4 id="_introducción_2">Introducción</h4>
<div class="paragraph">
<p>OpenShift implementa un robusto modelo de seguridad basado en múltiples capas para proteger aplicaciones en contenedores. Entre sus mecanismos clave destacan el control de acceso basado en roles (RBAC), la gestión de secretos, la auditoría, el cifrado de datos y, especialmente, las Restricciones de Contexto de Seguridad (SCC).</p>
</div>
</div>
<div class="sect3">
<h4 id="_restricciones_de_contexto_de_seguridad_scc">Restricciones de Contexto de Seguridad (SCC)</h4>
<div class="paragraph">
<p>Las SCC (<code>Security Context Constraints</code>) permiten a los administradores controlar las acciones y accesos que pueden realizar los pods dentro del clúster. Estas restricciones definen bajo qué condiciones se aceptan y ejecutan los pods, limitando capacidades como:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ejecución de contenedores privilegiados (<code>allowPrivilegedContainer</code>)</p>
</li>
<li>
<p>Escalado de privilegios (<code>allowPrivilegeEscalation</code>)</p>
</li>
<li>
<p>Uso de directorios del host como volúmenes</p>
</li>
<li>
<p>Contexto SELinux y usuario de ejecución</p>
</li>
<li>
<p>Acceso a namespaces y red del host</p>
</li>
<li>
<p>Permisos de grupos suplementarios y configuración de <code>FSGroup</code></p>
</li>
<li>
<p>Tipos de volúmenes permitidos</p>
</li>
<li>
<p>Uso de perfiles <code>seccomp</code></p>
</li>
<li>
<p>Acceso de solo lectura al sistema de archivos raíz</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Las SCC se aplican por defecto a todos los pods, salvo que se especifique lo contrario, siendo la SCC <code>restricted</code> (o <code>restricted-v2</code> en versiones recientes) la más estricta y la que se asigna por defecto a usuarios autenticados.</p>
</div>
<div class="sect4">
<h5 id="_ejemplo_de_scc_en_yaml">Ejemplo de SCC en YAML</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">kind: SecurityContextConstraints
apiVersion: security.openshift.io/v1
metadata:
  name: scc-admin
allowPrivilegedContainer: true
runAsUser:
  type: RunAsAny
seLinuxContext:
  type: RunAsAny
fsGroup:
  type: RunAsAny
supplementalGroups:
  type: RunAsAny
users:
  - my-admin-user
groups:
  - my-admin-group</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_scc_predeterminadas_en_openshift">SCC Predeterminadas en OpenShift</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Nombre de SCC</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>anyuid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permite ejecutar pods con cualquier UID/GID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hostaccess</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permite acceso a todos los namespaces del host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hostmount-anyuid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permite montajes de host y cualquier UID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hostnetwork</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permite uso de red y puertos del host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node-exporter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Acceso específico para Prometheus node exporter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nonroot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permite cualquier UID que no sea root.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>privileged</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permite todas las funciones privilegiadas y de host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>restricted</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deniega acceso a funciones del host; uso por defecto.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hostnetwork-v2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Versión ajustada de <code>hostnetwork</code> para alinearse con Pod Security Standards.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nonroot-v2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Versión ajustada de <code>nonroot</code> para alinearse con Pod Security Standards.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>restricted-v2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Versión ajustada de <code>restricted</code> para alinearse con Pod Security Standards.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_gestión_y_asignación_de_scc">Gestión y asignación de SCC</h4>
<div class="ulist">
<ul>
<li>
<p>Las SCC se gestionan mediante la CLI de OpenShift (<code>oc</code>) y pueden asignarse a usuarios, grupos o cuentas de servicio específicas.</p>
</li>
<li>
<p>Es recomendable no modificar las SCC predeterminadas salvo en los campos de <code>priority</code>, <code>users</code> o <code>groups</code>.</p>
</li>
<li>
<p>Para dar acceso a una SCC a una cuenta de servicio:
<code>oc adm policy add-scc-to-user &lt;scc&gt; -z &lt;serviceaccount&gt; -n &lt;namespace&gt;</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_mejores_prácticas_de_seguridad">Mejores prácticas de seguridad</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Principio de menor privilegio:</strong> Asignar solo los permisos estrictamente necesarios a usuarios y pods.</p>
</li>
<li>
<p><strong>Separación por namespaces/proyectos:</strong> Limitar el alcance de los permisos y recursos.</p>
</li>
<li>
<p><strong>Revisión periódica de políticas:</strong> Auditar y actualizar las SCC y RBAC según evolucionen los requisitos.</p>
</li>
<li>
<p><strong>Evitar contenedores privilegiados:</strong> Solo permitirlos en casos muy justificados y bajo control estricto.</p>
</li>
<li>
<p><strong>Escaneo de imágenes y gestión de vulnerabilidades:</strong> Mantener imágenes actualizadas y libres de vulnerabilidades.</p>
</li>
<li>
<p><strong>Cifrado de datos y secretos:</strong> Proteger datos sensibles tanto en tránsito como en reposo.</p>
</li>
<li>
<p><strong>Auditoría y monitoreo:</strong> Habilitar logs y alertas para detectar actividades sospechosas.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_cumplimiento_y_normativas">Cumplimiento y normativas</h4>
<div class="paragraph">
<p>OpenShift facilita el cumplimiento de estándares como PCI DSS, HIPAA o GDPR gracias a su modelo de aislamiento, control de acceso granular, gestión de secretos y capacidades de auditoría. La correcta configuración y uso de SCC es fundamental para garantizar la seguridad y el cumplimiento regulatorio[12].</p>
</div>
</div>
<div class="sect3">
<h4 id="_referencias_rápidas">Referencias rápidas</h4>
<div class="ulist">
<ul>
<li>
<p>Las SCC son exclusivas de OpenShift y no son equivalentes a las Pod Security Policies de Kubernetes.</p>
</li>
<li>
<p>El uso inadecuado de SCC puede provocar fallos de seguridad o de funcionamiento en los componentes del clúster.</p>
</li>
<li>
<p>Para más detalles sobre cada SCC y su configuración, consultar la documentación oficial de OpenShift.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_redes_y_almacenamiento_en_openshift">Redes y Almacenamiento en OpenShift</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_redes">Redes</h3>
<div class="paragraph">
<p>OpenShift utiliza una arquitectura de red basada en SDN (Software Defined Networking), lo que permite una gestión flexible y segura del tráfico entre pods, servicios y el exterior del clúster.</p>
</div>
<div class="paragraph">
<p><strong>Componentes clave:</strong>
- <strong>SDN y CNI:</strong> OpenShift SDN fue el plugin por defecto, pero desde la versión 4.12 se utiliza OVN-Kubernetes como CNI principal, manteniendo compatibilidad y mejorando capacidades.
- <strong>Multitenancy:</strong> Permite aislar redes entre proyectos o equipos mediante namespaces y políticas de red, garantizando que los recursos de un equipo no interfieran con los de otro.
- <strong>Network Policies:</strong> Definen el tráfico permitido entre pods, namespaces o rangos de IP. Por defecto, todo el tráfico está permitido, pero se puede restringir mediante objetos <code>NetworkPolicy</code> a nivel de proyecto.
- <strong>Ingress y Routes:</strong> OpenShift introduce el recurso <code>Route</code> como abstracción para exponer servicios hacia el exterior, asignando un hostname accesible públicamente y permitiendo configuración SSL/TLS. El Ingress Controller gestiona el tráfico entrante y lo enruta a los servicios internos.
- <strong>Egress:</strong> El tráfico saliente puede ser controlado mediante políticas de egress y routers específicos.
- <strong>Patrones de diseño de red:</strong> Desde clústeres simples (todo conectado) hasta entornos multitenant o híbridos, adaptando la arquitectura a las necesidades de seguridad y escalabilidad.</p>
</div>
</div>
<div class="sect2">
<h3 id="_almacenamiento">Almacenamiento</h3>
<div class="paragraph">
<p>OpenShift gestiona tanto almacenamiento efímero como persistente, cubriendo necesidades desde pruebas rápidas hasta aplicaciones empresariales con alta disponibilidad y durabilidad de datos[10].</p>
</div>
<div class="paragraph">
<p><strong>Tipos de almacenamiento:</strong>
- <strong>Almacenamiento efímero:</strong> Datos temporales que se pierden al reiniciar o eliminar el pod. Ejemplos: <code>emptyDir</code>, almacenamiento en disco local del nodo trabajador. Útil para cachés, logs temporales y pruebas unitarias[10].
- <strong>Almacenamiento persistente:</strong> Requiere volúmenes que sobrevivan a reinicios de pods o reubicaciones. Se implementa mediante Persistent Volumes (PV) y Persistent Volume Claims (PVC).</p>
</div>
<div class="paragraph">
<p><strong>Conceptos clave:</strong>
- <strong>PV y PVC:</strong> Los administradores crean PVs (recursos de almacenamiento físico o virtual). Los usuarios solicitan almacenamiento mediante PVCs, que se enlazan automáticamente a un PV disponible.
- <strong>Aprovisionamiento dinámico:</strong> Gracias a la Container Storage Interface (CSI), OpenShift puede aprovisionar volúmenes bajo demanda desde múltiples proveedores (NFS, Ceph, AWS EBS, Azure Disk, etc.) usando StorageClasses.
- <strong>OpenShift Data Foundation (ODF):</strong> Solución definida por software basada en Ceph, NooBaa y Rook, que unifica almacenamiento de bloques, archivos y objetos, optimizada para entornos híbridos y multicloud. Ofrece alta disponibilidad, escalabilidad y gestión centralizada.
- <strong>Clases de almacenamiento:</strong> Permiten definir políticas de replicación, compresión, retención y rendimiento. El administrador puede crear múltiples StorageClasses según necesidades de la aplicación (por ejemplo, clases con 2 o 3 réplicas, con compresión, etc.).
- <strong>Política de retención:</strong> Al eliminar un PVC, la política <code>Delete</code> borra el volumen subyacente, mientras que <code>Retain</code> lo conserva para recuperación manual.</p>
</div>
<div class="ulist">
<div class="title"><strong>Resumen de ventajas:</strong></div>
<ul>
<li>
<p>Flexibilidad para soportar cargas de trabajo con y sin estado.</p>
</li>
<li>
<p>Integración con proveedores de almacenamiento locales y en la nube.</p>
</li>
<li>
<p>Gestión centralizada y automatizada de volúmenes persistentes.</p>
</li>
<li>
<p>Seguridad y multitenancy tanto en red como en almacenamiento.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_servicios_redes_y_enrutamiento_en_openshift">Servicios, redes y enrutamiento en OpenShift</h3>
<div class="sect3">
<h4 id="_servicios_3">Servicios</h4>
<div class="paragraph">
<p>Un <strong>servicio</strong> en OpenShift es un recurso que expone una aplicación ejecutándose en uno o varios pods, proporcionando una IP virtual estable y un nombre DNS interno para acceder a ella. Esto permite el balanceo de carga entre réplicas y la abstracción de la infraestructura subyacente, facilitando el escalado y la tolerancia a fallos sin afectar a los clientes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cada servicio recibe una IP virtual y un nombre DNS gestionado por el sistema DNS interno de OpenShift.</p>
</li>
<li>
<p>Los servicios pueden ser de tipo <strong>ClusterIP</strong> (acceso interno), <strong>NodePort</strong> (acceso externo a través de puertos de los nodos) o <strong>LoadBalancer</strong> (integración con balanceadores externos en la nube).</p>
</li>
<li>
<p>El servicio selecciona los pods mediante etiquetas, permitiendo que el tráfico se dirija automáticamente a las instancias correctas.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_redes_2">Redes</h4>
<div class="paragraph">
<p>OpenShift utiliza una red definida por software (SDN) que proporciona una red de clúster unificada para la comunicación entre pods, servicios y recursos externos[11].</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cada pod recibe una IP única dentro del clúster, permitiendo la comunicación directa pod-a-pod sin NAT.</p>
</li>
<li>
<p>El tráfico entre pods puede ser controlado mediante <strong>Network Policies</strong>, que definen reglas de entrada y salida a nivel de namespace o pod.</p>
</li>
<li>
<p>OpenShift SDN implementa diferentes modelos de aislamiento, desde redes planas hasta multitenancy, usando Open vSwitch (OVS) y VXLAN para encapsular el tráfico[11].</p>
</li>
<li>
<p>El <strong>Cluster Network Operator</strong> gestiona los componentes de red, incluyendo el plugin CNI y el DNS interno.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_enrutamiento">Enrutamiento</h4>
<div class="paragraph">
<p>El enrutamiento en OpenShift permite exponer aplicaciones al exterior mediante recursos <strong>Route</strong> e <strong>Ingress</strong>, gestionados por el <strong>Ingress Controller</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Route:</strong> Es un recurso específico de OpenShift que asigna un nombre de host externo a un servicio, permitiendo acceso HTTP/HTTPS desde fuera del clúster. Ofrece funciones avanzadas como TLS passthrough, re-encryption y balanceo de tráfico para despliegues blue-green.</p>
</li>
<li>
<p><strong>Ingress:</strong> Es el recurso estándar de Kubernetes para gestionar el acceso externo a servicios HTTP/HTTPS. OpenShift lo implementa a través del <strong>Ingress Operator</strong>, que despliega el <strong>Ingress Controller</strong> y gestiona reglas de enrutamiento y certificados.</p>
</li>
<li>
<p>El enrutador de OpenShift puede ser personalizado y soporta múltiples implementaciones (HAProxy, NGINX, etc.), permitiendo la integración con balanceadores de carga externos o servicios cloud.</p>
</li>
<li>
<p>El tráfico de entrada es gestionado por los nodos de worker que ejecutan el controlador de Ingress, garantizando alta disponibilidad mediante réplicas distribuidas.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_service_mesh">Service Mesh</h4>
<div class="paragraph">
<p>Para arquitecturas de microservicios, OpenShift integra <strong>Service Mesh</strong> (basado en Istio, Kiali y Jaeger), que permite gestionar, observar y asegurar la comunicación entre servicios, facilitando la implementación de políticas, telemetría y trazabilidad avanzada.</p>
</div>
</div>
<div class="sect3">
<h4 id="_resumen_visual">Resumen visual</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Componente</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Servicio (Service)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Abstracción que expone pods a través de una IP y DNS internos, con balanceo de carga.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red SDN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red superpuesta que conecta todos los pods; control granular mediante Network Policies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Route</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recurso OpenShift para exponer servicios externamente con nombre de host y opciones avanzadas de TLS.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ingress</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recurso estándar Kubernetes para reglas de acceso HTTP/HTTPS externo.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service Mesh</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Infraestructura para gestión avanzada de tráfico, seguridad y observabilidad entre microservicios.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_referencias">Referencias</h4>
<div class="ulist">
<ul>
<li>
<p>OpenShift Networking: SDN, servicios, enrutadores y políticas[11].</p>
</li>
<li>
<p>Gestión de rutas e Ingress Controller.</p>
</li>
<li>
<p>Service Mesh para microservicios.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_almacenamiento_persistente_y_gestión_de_volúmenes_en_openshift">Almacenamiento persistente y gestión de volúmenes en OpenShift</h3>
<div class="sect3">
<h4 id="_fundamentos_del_almacenamiento_persistente">Fundamentos del almacenamiento persistente</h4>
<div class="paragraph">
<p>El almacenamiento persistente en OpenShift permite conservar datos de aplicaciones más allá del ciclo de vida de los contenedores, garantizando que la información sobreviva a reinicios, migraciones o fallos de pods. A diferencia del almacenamiento efímero (como <code>emptyDir</code>), los volúmenes persistentes mantienen datos críticos como bases de datos, configuraciones y archivos de usuario.</p>
</div>
</div>
<div class="sect3">
<h4 id="_componentes_clave">Componentes clave</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Persistent Volume (PV):</strong> Recurso físico o virtual de almacenamiento provisionado por el administrador. Ejemplos: volúmenes en bloque (OCI Block Volume, AWS EBS), sistemas de archivos (NFS, OCI File Storage) o soluciones SDS como Ceph.</p>
</li>
<li>
<p><strong>Persistent Volume Claim (PVC):</strong> Solicitud de almacenamiento por parte de un usuario/aplicación. Define tamaño, modo de acceso (ReadWriteOnce/ReadWriteMany) y StorageClass.</p>
</li>
<li>
<p><strong>StorageClass:</strong> "Plantilla" para aprovisionamiento dinámico. Define parámetros como tipo de replicación, cifrado o rendimiento. OpenShift Data Foundation (ODF) incluye clases preconfiguradas como <code>ocs-storagecluster-ceph-rbd</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_proceso_de_aprovisionamiento">Proceso de aprovisionamiento</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Ejemplo de PVC usando ODF
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: app-data
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: ocs-storagecluster-ceph-rbd
  resources:
    requests:
      storage: 100Gi</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>El usuario crea una PVC especificando requisitos.</p>
</li>
<li>
<p>El controlador CSI aprovisiona automáticamente un PV que cumple los requisitos.</p>
</li>
<li>
<p>OpenShift vincula la PVC al PV disponible.</p>
</li>
<li>
<p>El pod consume el almacenamiento montando la PVC.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_soluciones_destacadas">Soluciones destacadas</h4>
<div class="ulist">
<ul>
<li>
<p><strong>OpenShift Data Foundation (ODF):</strong> Solución SDS unificada (bloque/archivo/objeto) basada en Ceph. Ofrece:</p>
<div class="ulist">
<ul>
<li>
<p>Alta disponibilidad y escalabilidad</p>
</li>
<li>
<p>Snapshots y clones</p>
</li>
<li>
<p>Cifrado automático de datos</p>
</li>
<li>
<p>Soporte multicloud</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Red Hat Gluster Storage:</strong> Almacenamiento distribuido para configuraciones <strong>container-native</strong> (contenedorizado) o <strong>container-ready</strong> (nodos dedicados)</p>
</li>
<li>
<p><strong>Proveedores cloud:</strong> Integración nativa con OCI Block Volume, AWS EBS, Azure Disk y otros mediante plugins CSI</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_mejores_prácticas_3">Mejores prácticas</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Principio de mínimo privilegio:</strong> Asignar solo la capacidad necesaria en las PVC</p>
</li>
<li>
<p><strong>Monitorización:</strong> Supervisar uso/rendimiento con herramientas como Prometheus (configurando almacenamiento persistente para sus métricas)[10]</p>
</li>
<li>
<p><strong>Retención:</strong> Usar política <code>Retain</code> para datos críticos (evita borrado al eliminar PVC)</p>
</li>
<li>
<p><strong>Escalabilidad:</strong> Habilitar <code>allowVolumeExpansion: true</code> en StorageClass para ampliar volúmenes sin interrupciones</p>
</li>
<li>
<p><strong>Resiliencia:</strong> Replicación multi-nodo con soluciones como ODF para HA</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_migración_desde_openshift_3_x">Migración desde OpenShift 3.x</h4>
<div class="ulist">
<ul>
<li>
<p><strong>CSI reemplaza plugins antiguos:</strong> FlexVolume y almacenamiento local requieren reconfiguración</p>
</li>
<li>
<p><strong>ODF como sucesor de Gluster:</strong> Para despliegues container-native con aprovisionamiento dinámico</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_comparativa_de_opciones">Comparativa de opciones</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tipo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Casos de uso</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Limitaciones</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Volúmenes en bloque (CSI)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bases de datos, aplicaciones transaccionales</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Escalado vertical requerido para ampliación</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sistemas de archivos (NFS/OCI)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contenido compartido, repositorios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Latencia superior a bloques</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SDS (ODF/Gluster)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entornos híbridos, alta resiliencia</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Complejidad de gestión inicial</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_monitorización_y_gestión_en_openshift">Monitorización y Gestión en OpenShift</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OpenShift proporciona una plataforma integral para la monitorización y gestión de clústeres, aplicaciones y recursos de infraestructura. Su enfoque combina herramientas nativas, integraciones con soluciones de terceros y capacidades avanzadas de visualización, alertas y automatización para garantizar el rendimiento, la disponibilidad y la eficiencia operativa.</p>
</div>
<div class="ulist">
<div class="title">Monitorización nativa en OpenShift</div>
<ul>
<li>
<p><strong>Stack preinstalado y autogestionado:</strong> OpenShift incluye una pila de monitorización preconfigurada, autoinstalada y autoactualizable, basada en Prometheus, Alertmanager y Grafana, que monitoriza tanto los componentes principales de la plataforma como los proyectos definidos por el usuario.</p>
</li>
<li>
<p><strong>Visualización y dashboards:</strong> La consola web de OpenShift ofrece paneles visuales con métricas de estado del clúster, uso de recursos, eventos y alertas activas. Desde la consola se accede a dashboards personalizados y al Prometheus UI para consultas avanzadas (PromQL).</p>
</li>
<li>
<p><strong>Alertas y notificaciones:</strong> Alertmanager gestiona un conjunto de alertas predefinidas que notifican automáticamente a los administradores sobre problemas críticos, como sobrecarga de recursos, fallos en nodos o inconsistencias en el estado de los objetos del clúster.</p>
</li>
<li>
<p><strong>Persistencia de métricas:</strong> El almacenamiento persistente de métricas permite el análisis histórico y la generación de tendencias para la planificación de capacidad y la detección de anomalías.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Monitorización de aplicaciones y rendimiento</div>
<ul>
<li>
<p><strong>APM (Application Performance Monitoring):</strong> Instrumentación del código para identificar cuellos de botella, errores y medir la experiencia del usuario.</p>
</li>
<li>
<p><strong>Monitorización de infraestructura:</strong> Recopilación de métricas de CPU, memoria, disco y uso de red en hosts, nodos y contenedores, permitiendo la gestión proactiva de recursos y la optimización del clúster.</p>
</li>
<li>
<p><strong>Logs y trazas:</strong> Recolección y gestión de logs de contenedores, pods, eventos y auditoría para facilitar el diagnóstico y la resolución de incidencias.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Integración con herramientas externas</div>
<ul>
<li>
<p><strong>Soluciones de terceros:</strong> OpenShift se integra con plataformas líderes como Datadog, Dynatrace, Instana, Site24x7 y Broadcom, que ofrecen capacidades avanzadas de observabilidad, inteligencia artificial para detección de anomalías, correlación de eventos y automatización de respuestas.</p>
</li>
<li>
<p><strong>Gestión centralizada:</strong> Estas herramientas permiten la visualización y gestión unificada de múltiples clústeres y entornos, facilitando la operación en escenarios multi-nube o híbridos.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Gestión de recursos y capacidad</div>
<ul>
<li>
<p><strong>Visibilidad completa:</strong> Monitorización de todos los niveles (clúster, nodo, pod, contenedor, réplica, namespace) para optimizar la asignación de recursos y evitar cuellos de botella.</p>
</li>
<li>
<p><strong>Planificación y escalabilidad:</strong> Análisis de tendencias, predicción de cargas y ajuste dinámico de recursos mediante políticas de escalado automático y recomendaciones basadas en IA.</p>
</li>
<li>
<p><strong>Multi-tenancy:</strong> Gestión eficiente de recursos en entornos multiusuario mediante dashboards personalizados y alertas específicas por proyecto o equipo.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Mejores prácticas</div>
<ul>
<li>
<p><strong>Personalización de alertas y dashboards:</strong> Adaptar las reglas de alerta y los paneles a las necesidades específicas del negocio y las aplicaciones[10].</p>
</li>
<li>
<p><strong>Automatización de respuestas:</strong> Integrar la monitorización con sistemas de automatización para reducir el tiempo de resolución de incidencias (MTTR).</p>
</li>
<li>
<p><strong>Auditoría y cumplimiento:</strong> Uso de logs y métricas para auditorías de seguridad y cumplimiento normativo.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Resumen visual</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Componente</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prometheus &amp; Alertmanager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitorización y alertas nativas, almacenamiento de métricas y consultas avanzadas.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Grafana</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dashboards personalizables para visualización de métricas.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Consola web OpenShift</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gestión visual de métricas, alertas y recursos.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Herramientas externas (Datadog, Instana, Dynatrace, Site24x7)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Observabilidad avanzada, IA, gestión multi-clúster y automatización.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gestión de logs y trazas</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Diagnóstico, auditoría y análisis de incidencias.</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_registro_y_monitorización_de_aplicaciones_y_clústeres_en_openshift">Registro y monitorización de aplicaciones y clústeres en OpenShift</h3>
<div class="sect3">
<h4 id="_observabilidad_integral">Observabilidad integral</h4>
<div class="paragraph">
<p>OpenShift ofrece un enfoque de observabilidad que abarca la recopilación, almacenamiento, distribución, visualización y análisis de datos relacionados con indicadores (métricas), registros (logs), rastros (traces) y eventos. Esta integración permite diagnosticar y solucionar problemas rápidamente, optimizando tanto la infraestructura como las aplicaciones antes de que los incidentes impacten en los usuarios finales.</p>
</div>
</div>
<div class="sect3">
<h4 id="_monitorización_de_clústeres">Monitorización de clústeres</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Stack nativo:</strong> OpenShift incluye una pila de monitorización preconfigurada basada en Prometheus, Alertmanager y Grafana, que monitoriza tanto los componentes principales del clúster como los proyectos definidos por el usuario.</p>
</li>
<li>
<p><strong>Visualización y alertas:</strong> El dashboard de OpenShift permite consultar métricas en tiempo real y visualizar tendencias, además de gestionar reglas de alerta para notificar incidencias críticas del clúster.</p>
</li>
<li>
<p><strong>Monitorización personalizada:</strong> Los administradores pueden habilitar la monitorización para proyectos de usuario, permitiendo que desarrolladores y equipos definan métricas, alertas y dashboards específicos para sus aplicaciones.</p>
</li>
<li>
<p><strong>Agentes y DaemonSets:</strong> Soluciones como Broadcom DX APM, Dynatrace o Datadog despliegan agentes en cada nodo mediante DaemonSets para monitorizar el estado y el rendimiento del clúster y sus aplicaciones.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_registro_de_aplicaciones_y_clústeres">Registro de aplicaciones y clústeres</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Logs en tiempo real:</strong> Los registros de pods y aplicaciones pueden visualizarse en tiempo real desde la consola web o la CLI (<code>oc logs &lt;nombre-del-pod&gt;</code>), facilitando el seguimiento de la ejecución y la resolución de errores.</p>
</li>
<li>
<p><strong>Registro persistente:</strong> Para almacenamiento a largo plazo, OpenShift despliega un sistema de registro centralizado (por defecto, Elasticsearch como log store y Kibana para visualización), recolectando logs de nodos y contenedores. También es posible reenviar logs a sistemas externos.</p>
</li>
<li>
<p><strong>Filtrado y análisis avanzado:</strong> El UI de Logging y herramientas como LokiStack permiten filtrar, consultar y analizar registros por etiquetas, tipo de log o formato estructurado, facilitando la trazabilidad y el análisis forense.</p>
</li>
<li>
<p><strong>Logs de máquinas virtuales:</strong> En OpenShift Virtualization, los logs de las máquinas virtuales se obtienen desde los pods de lanzamiento asociados, tanto desde la consola como desde la CLI.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_mejores_prácticas_y_herramientas_externas">Mejores prácticas y herramientas externas</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Automatización desde el inicio:</strong> Integrar agentes de monitorización (como Dynatrace OneAgent) desde el principio del ciclo de vida de la aplicación garantiza cobertura total y alertas contextuales.</p>
</li>
<li>
<p><strong>Inteligencia artificial:</strong> Herramientas como Dynatrace usan IA para reducir el ruido de alertas, identificar problemas reales y optimizar recursos mediante análisis predictivo.</p>
</li>
<li>
<p><strong>Gestión centralizada:</strong> El administrador debe definir la solución de registro y monitorización a utilizar, informando a los equipos sobre el acceso a logs y métricas según el espacio de nombres o proyecto.</p>
</li>
<li>
<p><strong>Persistencia y visualización:</strong> Kibana, Grafana y la consola de OpenShift ofrecen dashboards personalizables para análisis visual de logs y métricas, facilitando la toma de decisiones basada en datos.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Resumen de herramientas de monitorización y registro en OpenShift</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Componente</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prometheus, Alertmanager, Grafana</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitorización nativa de métricas, alertas y dashboards.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift Logging (Elasticsearch, Kibana)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registro centralizado, almacenamiento y visualización de logs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LokiStack, Vector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ingesta y consulta avanzada de logs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Herramientas externas (Dynatrace, Broadcom DX APM)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitorización avanzada, IA, integración multi-clúster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Consola web y CLI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Acceso en tiempo real a logs y métricas por pod, aplicación o clúster.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_ejemplos_de_código_para_registro_y_monitorización_en_openshift">Ejemplos de código para registro y monitorización en OpenShift</h3>
<div class="listingblock">
<div class="title">Consulta de logs de un pod desde la CLI</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc get pods -n mi-proyecto
oc logs nombre-del-pod -n mi-proyecto</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Definición de una alerta personalizada en Prometheus</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: alerta-alta-cpu
  namespace: mi-proyecto
spec:
  groups:
  - name: reglas-cpu
    rules:
    - alert: UsoAltoCPU
      expr: sum(rate(container_cpu_usage_seconds_total{namespace="mi-proyecto"}[5m])) &gt; 1
      for: 5m
      labels:
        severity: warning
      annotations:
        summary: "Uso de CPU elevado en el proyecto mi-proyecto"
        description: "El uso de CPU ha superado el umbral de 1 core durante 5 minutos."</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Persistent Volume Claim (PVC) para almacenamiento persistente</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: mi-pvc
  namespace: mi-proyecto
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
  storageClassName: ocs-storagecluster-ceph-rbd</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Network Policy para restringir el tráfico a un pod</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: solo-acepta-de-app
  namespace: mi-proyecto
spec:
  podSelector:
    matchLabels:
      app: mi-app
  ingress:
  - from:
    - podSelector:
        matchLabels:
          rol: frontend</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Configuración de un Route para exponer un servicio</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: mi-app-route
  namespace: mi-proyecto
spec:
  to:
    kind: Service
    name: mi-app-service
  port:
    targetPort: 8080
  tls:
    termination: edge</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_6_dashboard_personalizado_en_grafana_json">6. Dashboard personalizado en Grafana (JSON)</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "dashboard": {
    "title": "Uso de CPU y Memoria",
    "panels": [
      {
        "type": "graph",
        "title": "CPU Usage",
        "targets": [
          {
            "expr": "sum(rate(container_cpu_usage_seconds_total{namespace='mi-proyecto'}[5m]))"
          }
        ]
      },
      {
        "type": "graph",
        "title": "Memory Usage",
        "targets": [
          {
            "expr": "sum(container_memory_usage_bytes{namespace='mi-proyecto'})"
          }
        ]
      }
    ]
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Consulta PromQL para Prometheus</div>
<div class="content">
<pre class="highlight"><code class="language-promql" data-lang="promql">sum(rate(container_cpu_usage_seconds_total{namespace="mi-proyecto"}[5m]))</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_uso_de_métricas_y_logs_para_troubleshooting_en_openshift">Uso de métricas y logs para troubleshooting en OpenShift</h3>
<div class="listingblock">
<div class="title">Flujo de diagnóstico</div>
<div class="content">
<pre>1. Detectar anomalía (alerta, degradación rendimiento)
2. Consultar métricas en tiempo real (Prometheus/Grafana)
3. Analizar logs relevantes (Kibana/oc logs)
4. Correlacionar eventos con métricas
5. Identificar root cause y aplicar corrección</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Métricas clave para troubleshooting</div>
<div class="content">
<pre class="highlight"><code class="language-promql" data-lang="promql">// 1. Uso de recursos por pod
container_cpu_usage_seconds_total{namespace="mi-app"}
container_memory_usage_bytes{pod=~"frontend-.*"}

// 2. Healthcheck fallidos
kube_pod_container_status_restarts_total{namespace="mi-app"}

// 3. Latencia de red
histogram_quantile(0.95, sum(rate(istio_request_duration_seconds_bucket{app="backend"}[5m])) by (le))

// 4. Errores HTTP
sum(rate(istio_requests_total{response_code=~"5.."}[5m])) by (destination_service)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Consultas útiles en Kibana (OpenShift Logging)</div>
<div class="content">
<pre class="highlight"><code class="language-promql" data-lang="promql">// 1. Buscar errores en pods específicos
kubernetes.namespace_name:"mi-app" AND (message:"ERROR" OR message:"Exception")

// 2. Logs de init containers fallidos
kubernetes.container_name:".*init.*" AND (stream:"stderr" OR level:"error")

// 3. Tiempos de respuesta lentos
message:"Request processing time" AND duration_ms:&gt;1000

// 4. Problemas de conexión a BD
message:"Connection refused" OR message:"Timeout"</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_ejemplo_práctico_diagnóstico_de_alto_cpu">Ejemplo práctico: Diagnóstico de alto CPU</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Paso 1: Identificar pod problemático
oc adm top pods -n mi-app

# Paso 2: Obtener logs del pod con alto CPU
oc logs frontend-7d4f8 -n mi-app --since=10m | grep -i "cpu intensive"

# Paso 3: Consultar métricas detalladas
curl -G "http://thanos-querier.openshift-monitoring:9090/api/v1/query" \
--data-urlencode 'query=sum(rate(container_cpu_usage_seconds_total{pod="frontend-7d4f8"}[5m])) by (container)'

# Paso 4: Generar flame graph (requiere perf-tools)
oc debug pod/frontend-7d4f8 -- perf record -F 99 -a -g -- sleep 30</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_patrones_comunes_de_troubleshooting">Patrones comunes de troubleshooting</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Síntoma</th>
<th class="tableblock halign-left valign-top">Métricas clave</th>
<th class="tableblock halign-left valign-top">Log patterns</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Altos reinicios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kube_pod_container_status_restarts_total</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OOMKilled</code>, <code>CrashLoopBackOff</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Latencia alta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>istio_request_duration_seconds</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Timeout</code>, <code>Request processing time</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Errores 5xx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>istio_requests_total{response_code=~"5.."}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Connection refused</code>, <code>NullPointerException</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alto uso CPU</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>container_cpu_usage_seconds_total</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>while(true)</code>, <code>CPU intensive operation</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_mejores_prácticas_4">Mejores prácticas</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Instrumentación aplicativa:</strong> Agregar logs estructurados con niveles (DEBUG, INFO, ERROR)</p>
</li>
<li>
<p><strong>Contexto en logs:</strong> Incluir request_id, user_id en cada entrada</p>
</li>
<li>
<p><strong>Alertas inteligentes:</strong> Basar alertas en tendencias, no umbrales estáticos</p>
</li>
<li>
<p><strong>Distributed tracing:</strong> Usar Jaeger/Istio para rastrear transacciones entre microservicios</p>
</li>
<li>
<p><strong>Retención adecuada:</strong> Mantener métricas 30 días y logs 7 días para análisis histórico</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_casos_prácticos_en_openshift">Casos Prácticos en OpenShift</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_despliegue_de_bases_de_datos_en_openshift">Despliegue de bases de datos en OpenShift</h3>
<div class="sect3">
<h4 id="_patrones_clave">Patrones clave</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Operadores de Kubernetes</strong>: Automatizan despliegue, escalado y gestión del ciclo de vida (ej: OperatorHub para PostgreSQL/MySQL)</p>
</li>
<li>
<p><strong>Persistencia garantizada</strong>: Uso de <code>PersistentVolumeClaims</code> con StorageClasses para volúmenes dinámicos</p>
</li>
<li>
<p><strong>Configuración segura</strong>: Secretos para credenciales y ConfigMaps para ajustes</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ejemplo_postgresql_con_aprovisionamiento_dinámico">Ejemplo: PostgreSQL con aprovisionamiento dinámico</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: apps/v1
kind: Deployment
metadata:
  name: postgres-db
spec:
  replicas: 1
  selector:
    matchLabels:
      app: postgres
  template:
    metadata:
      labels:
        app: postgres
    spec:
      containers:
      - name: postgres
        image: postgres:14
        env:
        - name: POSTGRES_PASSWORD
          valueFrom:
            secretKeyRef:
              name: db-secret
              key: password
        volumeMounts:
        - mountPath: /var/lib/postgresql/data
          name: postgredb
      volumes:
      - name: postgredb
        persistentVolumeClaim:
          claimName: postgres-pvc</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml"># PVC para almacenamiento persistente
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: postgres-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
  storageClassName: ocs-storagecluster-ceph-rbd</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_despliegue_de_wordpress_usando_templates">Despliegue de WordPress usando templates</h3>
<div class="sect3">
<h4 id="_flujo_con_plantilla_predefinida">Flujo con plantilla predefinida</h4>
<div class="listingblock">
<div class="title"><strong>Descargar plantilla</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">curl -O 'https://raw.githubusercontent.com/openshift-evangelists/wordpress-quickstart/master/templates/classic-standalone.json'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>Crear en OpenShift</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc create -f classic-standalone.json</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>Procesar parámetros</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc process wordpress-nginx-php
-p DB_VOLUME_CAPACITY=5Gi
-p APP_CPU_LIMIT=500m
-p MYSQL_ROOT_PASSWORD=$(openssl rand -hex 16)
| oc apply -f -</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_estructura_típica_de_template">Estructura típica de template</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">kind: Template
apiVersion: template.openshift.io/v1
metadata:
name: wordpress-template
objects:
- kind: DeploymentConfig
apiVersion: apps.openshift.io/v1
metadata:
 name: wordpress
spec:
 template:
   spec:
     containers:
     - name: wordpress
       image: wordpress:php8.0
       env:
       - name: WORDPRESS_DB_PASSWORD
         valueFrom:
           secretKeyRef:
             name: mysql-secret
             key: password
- kind: Service
apiVersion: v1
metadata:
 name: wordpress-service
spec:
 ports:
 - port: 80
 selector:
   app: wordpress
parameters:
- name: DB_VOLUME_CAPACITY
description: Tamaño del volumen para MySQL
value: "5Gi"
- name: APP_CPU_LIMIT
description: Límite de CPU para WordPress
value: "500m"</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_buenas_prácticas_para_aplicaciones_complejas">Buenas prácticas para aplicaciones complejas</h4>
<div class="ulist">
<div class="title"><strong>Separación de capas</strong>:</div>
<ul>
<li>
<p>Frontend (Nginx/PHP)</p>
</li>
<li>
<p>Backend (WordPress)</p>
</li>
<li>
<p>Base de datos (MySQL) en Deployment independiente
.<strong>Configuración parametrizada</strong>:</p>
</li>
<li>
<p>Variables para recursos (CPU/memoria)</p>
</li>
<li>
<p>Credenciales mediante Secrets</p>
</li>
<li>
<p>URLs de repositorios personalizables
.<strong>Escalado horizontal</strong>:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>oc scale deployment/wordpress --replicas=3</pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>Rutas con TLS</strong>:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">kind: Route
spec:
tls:
termination: edge
key:  |
  -----BEGIN CERTIFICATE-----
  [...]
  -----END CERTIFICATE-----
certificate: |
    -----BEGIN CERTIFICATE-----
    [...]
    -----END CERTIFICATE-----
host: wordpress.example.com
to:
  kind: Service
  name: wordpress-service
port:
  targetPort: 80</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_helm_en_openshift">Helm en OpenShift</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Helm es un gestor de paquetes para Kubernetes que simplifica la instalación, actualización y gestión de aplicaciones en clústeres Kubernetes. Utiliza "charts", que son colecciones de archivos que describen los recursos necesarios para desplegar una aplicación, incluyendo configuraciones, dependencias y plantillas.</p>
</div>
<div class="paragraph">
<p>Helm permite a los usuarios instalar aplicaciones complejas con un solo comando, gestionar versiones y realizar actualizaciones de manera sencilla. Es especialmente útil en entornos de producción donde se requiere consistencia y control en el despliegue de aplicaciones.</p>
</div>
<div class="ulist">
<div class="title">Elementos que componen Helm:</div>
<ul>
<li>
<p><strong>Charts</strong>: Paquetes de Helm que contienen todos los recursos necesarios para desplegar una aplicación. Incluyen plantillas de Kubernetes, valores predeterminados y metadatos.</p>
</li>
<li>
<p><strong>Releases</strong>: Instancias de un chart desplegado en un clúster. Cada release tiene un nombre único y puede ser actualizado o eliminado sin afectar a otros releases.</p>
</li>
<li>
<p><strong>Repositories</strong>: Colecciones de charts almacenados en un servidor HTTP. Se puede añadir o quitar repositorios para acceder a diferentes aplicaciones y versiones.</p>
</li>
<li>
<p><strong>Helm CLI</strong>: Aplicación de línea de comandos para interactuar con Helm, permitiendo instalar, actualizar, eliminar y gestionar releases y charts.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_instalación_y_configuración_de_helm_en_openshift">Instalación y Configuración de Helm en OpenShift</h3>
<div class="sect3">
<h4 id="_requisitos_previos">Requisitos Previos</h4>
<div class="ulist">
<ul>
<li>
<p>Disponer de un clúster OpenShift en funcionamiento.</p>
</li>
<li>
<p>Acceso de administrador o permisos suficientes para instalar software y gestionar recursos en el clúster.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_instalación_del_cliente_helm">Instalación del Cliente Helm</h4>
<div class="listingblock">
<div class="title">Descarga el binario de Helm para Linux:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">wget -O helm https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/helm/latest/helm-linux-amd64</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Instala el binario en tu PATH:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo install helm /usr/local/bin</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Verifica la instalación:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm version</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_alternativa_con_curl">Alternativa con curl</h4>
<div class="listingblock">
<div class="title">Si prefieres usar <code>curl</code> para descargar Helm, puedes hacerlo con el siguiente comando:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">curl -L https://mirror.openshift.com/pub/openshift-v4/clients/helm/latest/helm-linux-amd64 -o /usr/local/bin/helm
chmod +x /usr/local/bin/helm
helm version</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_configuración_inicial">Configuración Inicial</h4>
<div class="listingblock">
<div class="title">Accede al clúster OpenShift:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc login https://&lt;URL-CLUSTER&gt;:&lt;PUERTO&gt; --token=&lt;TOKEN&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">(Opcional) Crea un nuevo proyecto para desplegar aplicaciones:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc new-project &lt;nombre-proyecto&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_añadir_repositorios_de_charts">Añadir Repositorios de Charts</h4>
<div class="listingblock">
<div class="title">Añade el repositorio oficial de charts de OpenShift:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm repo add openshift-helm-charts https://charts.openshift.io/</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Actualiza la lista de charts:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm repo update</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para ver los charts disponibles en el repositorio:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm search repo openshift-helm-charts</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_instalación_de_un_chart_de_ejemplo">Instalación de un Chart de Ejemplo</h4>
<div class="listingblock">
<div class="title">Instala un chart (por ejemplo, HashiCorp Vault):</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm install example-vault openshift-helm-charts/redhat-redis-sed</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Verifica la instalación:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm list
oc get pods -n &lt;nombre-proyecto&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_notas">Notas</h4>
<div class="ulist">
<ul>
<li>
<p>Puedes gestionar el ciclo de vida de las aplicaciones con los comandos estándar de Helm: install, upgrade, rollback, delete, etc.</p>
</li>
<li>
<p>Consulta la documentación oficial de OpenShift y Helm para detalles adicionales y compatibilidad de versiones.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_repositorios_de_helm">Repositorios de Helm</h3>
<div class="sect3">
<h4 id="_qué_es_un_repositorio_de_charts">¿Qué es un repositorio de Charts?</h4>
<div class="paragraph">
<p>Un repositorio de charts es un servidor (normalmente HTTP) donde se almacenan y comparten charts de Helm, que son paquetes que describen los recursos necesarios para desplegar aplicaciones en Kubernetes. Los repositorios pueden ser públicos o privados y permiten a los usuarios buscar, descargar e instalar charts fácilmente, facilitando la reutilización y colaboración entre equipos y comunidades.</p>
</div>
</div>
<div class="sect3">
<h4 id="_añadir_actualizar_y_eliminar_repositorios">Añadir, actualizar y eliminar repositorios</h4>
<div class="listingblock">
<div class="title">Añadir un repositorio:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm repo add &lt;nombre&gt; &lt;url&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Actualizar la información de los repositorios:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm repo update</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listar los repositorios configurados:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm repo list</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Eliminar un repositorio:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm repo remove &lt;nombre&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Por ejemplo, para añadir el repositorio de Bitnami y actualizarlo:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm repo add bitnami https://charts.bitnami.com/bitnami
helm repo update</code></pre>
</div>
</div>
<div class="paragraph">
<p>Siempre es recomendable ejecutar <code>helm repo update</code> después de añadir o modificar repositorios para asegurarse de tener la información más reciente de los charts disponibles.</p>
</div>
</div>
<div class="sect3">
<h4 id="_buscar_y_listar_charts_disponibles">Buscar y listar Charts disponibles</h4>
<div class="listingblock">
<div class="title">Buscar un chart por palabra clave en todos los repositorios:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm search repo &lt;palabra-clave&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Buscar charts en Artifact Hub (repositorio central de la comunidad):</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm search hub &lt;palabra-clave&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ejemplo para listar todos los charts del repositorio Bitnami:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm search repo bitnami</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_trabajando_con_charts">Trabajando con Charts</h3>
<div class="sect3">
<h4 id="_instalación_de_aplicaciones_usando_charts">Instalación de aplicaciones usando Charts</h4>
<div class="listingblock">
<div class="title">Buscar Charts disponibles:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm search repo &lt;nombre-chart&gt;  # Ej: helm search repo apache</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Instalar un Chart:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm install &lt;nombre-release&gt; &lt;repositorio&gt;/&lt;chart&gt;  # Ej: helm install mi-apache bitnami/apache</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Instalar desde archivo local:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm install foo foo-0.1.1.tgz</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Instalar desde directorio:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm install foo path/to/foo</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Instalar desde URL:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm install foo https://example.com/charts/foo-1.2.3.tgz</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_gestión_de_releases_upgrade_rollback_delete">Gestión de releases: upgrade, rollback, delete</h4>
<div class="listingblock">
<div class="title">Actualizar (upgrade) un release:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm upgrade &lt;release&gt; &lt;chart&gt;  # Ej: helm upgrade mi-apache bitnami/apache</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ver historial de revisiones:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm history &lt;release&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Rollback de un release:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm rollback &lt;release&gt; &lt;revision&gt;  # Ej: helm rollback mi-apache 1</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Eliminar (delete) un release:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm uninstall &lt;release&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Eliminar forzosamente un release atascado:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm delete &lt;release&gt; --namespace &lt;namespace&gt; --force</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ejemplos_prácticos_instalar_apache_redis_etc">Ejemplos prácticos: instalar Apache, Redis, etc.</h4>
<div class="listingblock">
<div class="title">Instalar Apache:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm repo add bitnami https://charts.bitnami.com/bitnami
helm install mi-apache bitnami/apache</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Verificar estado de los recursos:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">kubectl get pods,svc</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Instalar Redis:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm install mi-redis bitnami/redis</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Instalar Redis con configuración personalizada:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm install mi-redis bitnami/redis --set persistence.enabled=true --set password=mi-contraseña</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Instalar Redis Enterprise Operator:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm repo add redis https://helm.redis.io/
helm install redis-operator redis/redis-enterprise-operator --create-namespace --namespace redis</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_información_y_diagnóstico_de_releases_y_charts">Información y diagnóstico de releases y Charts</h4>
<div class="listingblock">
<div class="title">Listar releases activos en el namespace actual:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm list</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listar releases en todos los namespaces:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm list -A</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ver estado detallado de un release:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm status &lt;release&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ejecutar pruebas definidas en el chart:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm test &lt;release&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listar releases fallidos:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm ls --failed</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Recuperar secretos de Helm:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">kubectl get secrets</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Forzar rollback completo y reiniciar pods:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm rollback &lt;release&gt; &lt;revision&gt; --recreate-pods</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creación_de_charts_propios">Creación de Charts Propios</h3>
<div class="sect3">
<h4 id="_estructura_de_un_chart">Estructura de un Chart</h4>
<div class="listingblock">
<div class="title">La estructura básica de un chart de Helm sigue este esquema:</div>
<div class="content">
<pre>mychart/
├── Chart.yaml          # Metadata del chart (nombre, versión, descripción)
├── values.yaml         # Valores por defecto para la configuración
├── charts/             # Dependencias/subcharts
├── templates/          # Plantillas de recursos Kubernetes
│   ├── deployment.yaml
│   ├── service.yaml
│   └── ...
└── tests/              # Pruebas del chart
    └── test-connection.yaml</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_archivos_y_directorios_principales">Archivos y directorios principales</h4>
<div class="ulist">
<div class="title">Chart.yaml:</div>
<ul>
<li>
<p>Campos obligatorios: <code>apiVersion</code>, <code>name</code>, <code>version</code>, <code>description</code></p>
</li>
<li>
<p>Campos opcionales: <code>type</code>, <code>keywords</code>, <code>home</code>, <code>dependencies</code></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">values.yaml:</div>
<ul>
<li>
<p>Define variables configurables por el usuario</p>
</li>
<li>
<p>Ejemplo de jerarquía:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>replicaCount: 3
image:
  repository: nginx
  tag: "1.23"</pre>
</div>
</div>
<div class="ulist">
<div class="title">templates/:</div>
<ul>
<li>
<p>Archivos YAML/Go templates que generan manifiestos Kubernetes</p>
</li>
<li>
<p>Nombres recomendados: <code>deployment.yaml</code>, <code>service.yaml</code>, <code>ingress.yaml</code>, etc.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">templates/NOTES.txt:</div>
<ul>
<li>
<p>Mensaje de post-instalación mostrado al usuario</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_creación_de_la_estructura_básica">Creación de la estructura básica</h4>
<div class="listingblock">
<div class="title">Crear estructura inicial:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm create mi-chart
cd mi-chart</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Archivos generados automáticamente:</div>
<div class="content">
<pre>mi-chart/
├── Chart.yaml
├── values.yaml
├── charts/
├── templates/
│   ├── deployment.yaml
│   ├── hpa.yaml
│   ├── ingress.yaml
│   ├── service.yaml
│   ├── serviceaccount.yaml
│   └── tests/
└── .helmignore</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_personalización_de_plantillas_y_ficheros">Personalización de plantillas y ficheros</h4>
<div class="listingblock">
<div class="title">Editar <code>values.yaml</code> para añadir parámetros personalizados:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">appName: "mi-app"
replicaCount: 2
resources:
  limits:
    cpu: 500m</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Modificar plantillas en <code>templates/</code> usando sintaxis Go:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml"># templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
spec:
  replicas: {{ .Values.replicaCount }}
  template:
    spec:
      containers:
      - name: {{ .Chart.Name }}
        image: "{{ .Values.image.repository }}:{{ .Values.image.tag }}"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Usar funciones de plantilla:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">{{- if .Values.ingress.enabled }}
apiVersion: networking.k8s.io/v1
kind: Ingress
...
{{- end }}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_instalación_y_pruebas_de_un_chart_propio">Instalación y pruebas de un Chart propio</h4>
<div class="listingblock">
<div class="title">Instalar desde directorio local:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm install mi-release ./mi-chart</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Verificar recursos creados:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">kubectl get all -l app.kubernetes.io/instance=mi-release</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Probar con valores personalizados:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm install mi-release ./mi-chart --set replicaCount=4</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ejecutar pruebas incluidas:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm test mi-release</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Empaquetar para distribución:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm package ./mi-chart</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_values_y_personalización">Values y Personalización</h3>
<div class="sect3">
<h4 id="_uso_de_values_yaml">Uso de values.yaml</h4>
<div class="listingblock">
<div class="title">El archivo <code>values.yaml</code> define los valores por defecto de las variables que utilizan las plantillas del chart. Permite parametrizar configuraciones como el número de réplicas, la imagen del contenedor, recursos, puertos, etc. Ejemplo típico:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">replicaCount: 2
image:
  repository: nginx
  tag: "1.25"
service:
  type: ClusterIP
  port: 80
resources: {}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Los valores definidos aquí pueden ser referenciados en las plantillas con la sintaxis:</div>
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">{{ .Values.replicaCount }}
{{ .Values.image.repository }}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sobrescribir_valores_por_línea_de_comandos_o_ficheros_externos">Sobrescribir valores por línea de comandos o ficheros externos</h4>
<div class="listingblock">
<div class="title">Para sobrescribir valores individuales desde la línea de comandos:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm install mi-release ./mi-chart --set replicaCount=4 --set image.tag="1.26"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para sobrescribir múltiples valores usando un archivo externo:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm install mi-release ./mi-chart -f mis-valores.yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Es posible combinar ambos métodos:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm install mi-release ./mi-chart -f mis-valores.yaml --set service.type=LoadBalancer</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para actualizar valores en un release ya instalado:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">helm upgrade mi-release ./mi-chart --set replicaCount=5</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_buenas_prácticas_en_la_gestión_de_valores">Buenas prácticas en la gestión de valores</h4>
<div class="ulist">
<ul>
<li>
<p>Documenta todos los valores posibles en el propio <code>values.yaml</code> con comentarios.</p>
</li>
<li>
<p>Usa nombres descriptivos y jerárquicos para facilitar la lectura y modificación.</p>
</li>
<li>
<p>No almacenes secretos directamente en <code>values.yaml</code>; utiliza herramientas como Sealed Secrets o External Secrets.</p>
</li>
<li>
<p>Proporciona archivos de valores de ejemplo para distintos entornos (<code>values-dev.yaml</code>, <code>values-prod.yaml</code>).</p>
</li>
<li>
<p>Valida los valores usando esquemas (<code>values.schema.json</code>) si tu chart lo requiere.</p>
</li>
<li>
<p>Mantén los valores por defecto lo más genéricos posible para favorecer la reutilización.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_plantillas_y_funciones">Plantillas y Funciones</h3>
<div class="sect3">
<h4 id="_sintaxis_de_plantillas_en_helm_go_templates">Sintaxis de plantillas en Helm (Go templates)</h4>
<div class="paragraph">
<p>Las plantillas de Helm usan la sintaxis de Go templates para generar manifiestos Kubernetes dinámicos:
- Delimitadores <code>{{ }}</code> para lógica de plantillas
- Acceso a objetos como <code>.Values</code>, <code>.Release</code>, y <code>.Chart</code>
- Más de 60 funciones incorporadas para manipulación de datos</p>
</div>
<div class="listingblock">
<div class="title">Ejemplo básico de ConfigMap:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-configmap
data:
  greeting: "{{ .Values.greeting | default "Hello" }}"</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_uso_de_variables_funciones_y_pipelines">Uso de variables, funciones y pipelines</h4>
<div class="listingblock">
<div class="title">Variables (persisten fuera de bloques):</div>
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">{{- $app := .Chart.Name -}}
metadata:
  name: {{ $app }}-config</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Funciones esenciales:</div>
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go"># Strings: upper, trim, replace
{{ "hello" | upper }} → HELLO

# Conversión: toYaml, b64enc
{{ .Values.config | toYaml }}

# Matemáticas: add, mul
{{ 3 | add 5 }} → 8</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Pipelines (encadenamiento):</div>
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">{{ .Values.image.tag | default "latest" | quote }}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_control_de_flujo_condicionales_y_bucles">Control de flujo: condicionales y bucles</h3>
<div class="listingblock">
<div class="title">Condicionales (if/else):</div>
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">{{- if .Values.ingress.enabled }}
apiVersion: networking.k8s.io/v1
kind: Ingress
{{- else }}
# No se crea Ingress
{{- end }}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Bucles (range):</div>
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">env:
  {{- range $key, $val := .Values.envVars }}
  - name: {{ $key | upper }}
    value: {{ $val | quote }}
  {{- end }}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Operadores lógicos:</div>
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">{{- if and (eq .Values.env "prod") (gt .Values.replicas 3) }}
# Configuración para producción
{{- end }}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ejercicios_prácticos_de_personalización_avanzada">Ejercicios prácticos de personalización avanzada</h3>
<div class="listingblock">
<div class="title">Plantilla dinámica para entornos múltiples:</div>
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">{{- $env := .Values.environment | default "dev" -}}
image: "{{ .Values.image.registry }}/app:{{ index .Values.image.tags $env }}"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Generación condicional de HPA:</div>
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">{{- if and .Values.autoscaling.enabled (gt .Values.replicas 1) }}
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
spec:
  minReplicas: {{ .Values.autoscaling.min }}
{{- end }}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Loop indexado para StatefulSets:</div>
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">{{- range $i := until .Values.redis.replicas }}
apiVersion: v1
kind: Pod
metadata:
  name: redis-{{ $i }}
spec:
  containers:
  - name: redis
    image: {{ $.Values.redis.image }}
{{- end }}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Plantillas anidadas con <code>tpl</code>:</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml"># values.yaml
configTemplate: "timeout: {{ .Values.timeout }}"

# template
data:
  config.yml: {{ tpl .Values.configTemplate . }}</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Buenas prácticas:</div>
<ul>
<li>
<p>Usar <code>{{-</code> y <code>-}}</code> para control de espacios</p>
</li>
<li>
<p>Crear helpers en <code>_helpers.tpl</code> para lógica compleja</p>
</li>
<li>
<p>Validar valores con <code>values.schema.json</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-06-26 21:06:16 +0200
</div>
</div>
</body>
</html>